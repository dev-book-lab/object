# Chapter 02. ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°

> *"ì§„ì •í•œ ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ìœ¼ë¡œì˜ ì „í™˜ì€ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ê°ì²´ì— ì´ˆì ì„ ë§ì¶°ì•¼ë§Œ ì–»ì„ ìˆ˜ ìˆë‹¤"*

## ğŸ“Œ í•µì‹¬ ê°œë…

- **í˜‘ë ¥(Collaboration)**: ê°ì²´ë“¤ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ ìˆ˜í–‰í•˜ëŠ” ìƒí˜¸ì‘ìš©
- **ë©”ì‹œì§€(Message)**: ê°ì²´ê°€ ë‹¤ë¥¸ ê°ì²´ì™€ í˜‘ë ¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ì˜ì‚¬ì†Œí†µ ë©”ì»¤ë‹ˆì¦˜
- **ë‹¤í˜•ì„±(Polymorphism)**: ë™ì¼í•œ ë©”ì‹œì§€ì— ëŒ€í•´ ê°ì²´ë§ˆë‹¤ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì‘ë‹µí•˜ëŠ” ëŠ¥ë ¥
- **ì¶”ìƒí™”(Abstraction)**: ì„¸ë¶€ì‚¬í•­ì„ ê°ì¶”ê³  ë³¸ì§ˆì ì¸ ê°œë…ë§Œ ë‚¨ê¸°ëŠ” ê²ƒ
- **ìƒì†(Inheritance)**: ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ê³  ë‹¤í˜•ì„±ì„ êµ¬í˜„í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜
- **í•©ì„±(Composition)**: ê°ì²´ë¥¼ í¬í•¨í•´ì„œ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ë°©ë²•

---

## ğŸ¯ í•™ìŠµ ëª©í‘œ

1. ë„ë©”ì¸ ê°œë…ì—ì„œ ê°ì²´ì™€ í´ë˜ìŠ¤ë¡œ ì „í™˜í•˜ëŠ” ê³¼ì • ì´í•´í•˜ê¸°
2. í˜‘ë ¥í•˜ëŠ” ê°ì²´ë“¤ì˜ ê³µë™ì²´ë¡œ í”„ë¡œê·¸ë¨ì„ ë°”ë¼ë³´ê¸°
3. ìƒì†ê³¼ ë‹¤í˜•ì„±ì„ í™œìš©í•œ ìœ ì—°í•œ ì„¤ê³„ êµ¬í˜„í•˜ê¸°
4. ì¶”ìƒí™”ë¥¼ í†µí•´ ë³€ê²½ì— ìœ ì—°í•œ ì½”ë“œ ë§Œë“¤ê¸°
5. ìƒì†ê³¼ í•©ì„±ì˜ ì°¨ì´ì ê³¼ íŠ¸ë ˆì´ë“œì˜¤í”„ ì´í•´í•˜ê¸°

---

## ğŸ¬ ì˜ˆì œ: ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œ

### ë„ë©”ì¸ ì„¤ëª…

ì˜¨ë¼ì¸ ì˜í™” ì˜ˆë§¤ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤. Chapter 01ì˜ ê·¹ì¥ ì˜ˆì œë³´ë‹¤ ë³µì¡í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ìš©ì–´**:

| ìš©ì–´ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **ì˜í™” (Movie)** | ì˜í™”ì˜ ê¸°ë³¸ ì •ë³´ | ì œëª©, ìƒì˜ì‹œê°„, ê¸°ë³¸ ìš”ê¸ˆ |
| **ìƒì˜ (Screening)** | ì‹¤ì œ ê´€ëŒ ì´ë²¤íŠ¸ | "ì•„ë°”íƒ€" 12ì›” 15ì¼ 10:00 ìƒì˜ |
| **í• ì¸ ì¡°ê±´ (Discount Condition)** | í• ì¸ ì—¬ë¶€ë¥¼ ê²°ì •í•˜ëŠ” ê·œì¹™ | ìˆœë²ˆ ì¡°ê±´, ê¸°ê°„ ì¡°ê±´ |
| **í• ì¸ ì •ì±… (Discount Policy)** | í• ì¸ ìš”ê¸ˆ ê³„ì‚° ë°©ë²• | ê¸ˆì•¡ í• ì¸, ë¹„ìœ¨ í• ì¸ |
| **ì˜ˆë§¤ (Reservation)** | ê³ ê°ì˜ ì˜ˆë§¤ ì •ë³´ | ê³ ê°, ìƒì˜, ì¸ì›, ìš”ê¸ˆ |

**ì¤‘ìš”í•œ êµ¬ë¶„**:
```
ì˜í™” (Movie)
  â†“ has
ì—¬ëŸ¬ ê°œì˜ ìƒì˜ (Screening)

ì˜ˆì‹œ:
"ì•„ë°”íƒ€"ë¼ëŠ” ì˜í™”ëŠ” í•˜ë‚˜
  â”œâ”€ 12ì›” 15ì¼ 10:00 ìƒì˜ (1íšŒì°¨)
  â”œâ”€ 12ì›” 15ì¼ 14:00 ìƒì˜ (2íšŒì°¨)
  â””â”€ 12ì›” 15ì¼ 18:00 ìƒì˜ (3íšŒì°¨)

ì‚¬ìš©ìê°€ ì˜ˆë§¤í•˜ëŠ” ëŒ€ìƒ = ìƒì˜ (íŠ¹ì • ì¼ì‹œì˜ ì´ë²¤íŠ¸)
```

**í• ì¸ ê·œì¹™**:

1. **í• ì¸ ì¡°ê±´** (í•˜ë‚˜ë¼ë„ ë§Œì¡±í•˜ë©´ í• ì¸ ê°€ëŠ¥):
   - ìˆœë²ˆ ì¡°ê±´: "1íšŒì°¨ ìƒì˜", "10íšŒì°¨ ìƒì˜" ë“±
   - ê¸°ê°„ ì¡°ê±´: "ì›”ìš”ì¼ 10:00~12:00", "ëª©ìš”ì¼ 14:00~21:00" ë“±

2. **í• ì¸ ì •ì±…** (ì˜í™”ë‹¹ í•˜ë‚˜ë§Œ ì ìš©):
   - ê¸ˆì•¡ í• ì¸: 800ì› í• ì¸
   - ë¹„ìœ¨ í• ì¸: 10% í• ì¸
   - í• ì¸ ì—†ìŒ: 0ì› í• ì¸

### ë„ë©”ì¸ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Movie     â”‚â—†â”€â”€â”€â”€â”€â”€â†’ â”‚ Discount     â”‚
â”‚   (ì˜í™”)     â”‚         â”‚ Policy       â”‚
â”‚             â”‚         â”‚ (í• ì¸ ì •ì±…)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚ has                    â”‚ has
       â†“                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Screening  â”‚         â”‚ Discount     â”‚
â”‚   (ìƒì˜)     â”‚         â”‚ Condition    â”‚
â”‚             â”‚         â”‚ (í• ì¸ ì¡°ê±´)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ creates
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reservation â”‚
â”‚   (ì˜ˆë§¤)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ ê¸°ì´ˆ í´ë˜ìŠ¤ë“¤

### ğŸ‘¤ Customer - ê³ ê°

> ğŸ“‚ **ì½”ë“œ**: [`Customer.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/Customer.java)

```java
package org.eternity.movie.step01;

public class Customer {
    private String name;  // ê³ ê° ì´ë¦„
    private String id;    // ê³ ê° ID
    
    public Customer(String name, String id) {
        this.id = id;
        this.name = name;
    }
}
```

ğŸ’¡ **ì„¤ëª…**:
- ì˜ˆë§¤ë¥¼ ì§„í–‰í•˜ëŠ” ê³ ê°ì˜ ì •ë³´ë¥¼ ë‹´ëŠ” í´ë˜ìŠ¤
- í˜„ì¬ëŠ” ë‹¨ìˆœíˆ ì´ë¦„ê³¼ IDë§Œ ë³´ê´€
- ì‹¤ì œë¡œëŠ” getter ë©”ì„œë“œë‚˜ ì¶”ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ìˆì„ ìˆ˜ ìˆìŒ
- **Chapter 02ì˜ í•µì‹¬ì€ ê³ ê°ì´ ì•„ë‹Œ ì˜í™” ìš”ê¸ˆ ê³„ì‚°ì´ë¯€ë¡œ ë‹¨ìˆœí•˜ê²Œ êµ¬í˜„**

---

## ğŸ’° Money - ê¸ˆì•¡ì„ í‘œí˜„í•˜ëŠ” ê°’ ê°ì²´

> ğŸ“‚ **ì½”ë“œ**: [`Money.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/money/Money.java)

### ì™œ Longì´ ì•„ë‹Œ Money í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ”ê°€?

```java
// âŒ ë‚˜ìœ ì˜ˆ: ì›ì‹œ íƒ€ì… ì‚¬ìš©
long price = 10000;
long discount = 800;
long finalPrice = price - discount;

// ë¬¸ì œì :
price = discount * 2;  // ê°€ê²©ì— í• ì¸ìœ¨ì„ ê³±í•¨ (ì‹¤ìˆ˜)
long duration = 120;
price = price + duration;  // ê°€ê²©ì— ìƒì˜ì‹œê°„ì„ ë”í•¨ (íƒ€ì… ì•ˆì „ì„± ì—†ìŒ)
```

```java
// âœ… ì¢‹ì€ ì˜ˆ: ê°’ ê°ì²´ ì‚¬ìš©
Money price = Money.wons(10000);
Money discount = Money.wons(800);
Money finalPrice = price.minus(discount);

// ì¥ì :
// 1. íƒ€ì… ì•ˆì „ì„±: Moneyë¼ë¦¬ë§Œ ì—°ì‚° ê°€ëŠ¥
// 2. ì˜ë¯¸ ëª…í™•: plus, minus, times ë“± ë„ë©”ì¸ ìš©ì–´ ì‚¬ìš©
// 3. ë¶ˆë³€ì„±: í•œ ë²ˆ ìƒì„±ë˜ë©´ ë³€ê²½ ë¶ˆê°€
```

### ì „ì²´ ì½”ë“œ ë¶„ì„

```java
package org.eternity.money;

import java.math.BigDecimal;
import java.util.Objects;

public class Money {
    // âœ… ìƒìˆ˜ë¡œ 0ì›ì„ ì œê³µ (ìì£¼ ì‚¬ìš©ë˜ë¯€ë¡œ)
    public static final Money ZERO = Money.wons(0);

    // âœ… final: ë¶ˆë³€ì„± ë³´ì¥
    // âœ… BigDecimal: ì •í™•í•œ ê¸ˆì•¡ ê³„ì‚° (doubleì€ ë¶€ì •í™•)
    private final BigDecimal amount;

    // âœ… íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´: ìƒì„± ë°©ë²•ì„ ëª…í™•í•˜ê²Œ í‘œí˜„
    public static Money wons(long amount) {
        return new Money(BigDecimal.valueOf(amount));
    }

    public static Money wons(double amount) {
        return new Money(BigDecimal.valueOf(amount));
    }

    // âœ… package-private ìƒì„±ì: íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ ìƒì„±
    Money(BigDecimal amount) {
        this.amount = amount;
    }

    // âœ… ë¶ˆë³€ ê°ì²´ íŒ¨í„´: ì—°ì‚° ê²°ê³¼ë¥¼ ìƒˆ ê°ì²´ë¡œ ë°˜í™˜
    public Money plus(Money amount) {
        return new Money(this.amount.add(amount.amount));
    }

    public Money minus(Money amount) {
        return new Money(this.amount.subtract(amount.amount));
    }

    public Money times(double percent) {
        return new Money(this.amount.multiply(BigDecimal.valueOf(percent)));
    }

    // âœ… ë¹„êµ ì—°ì‚°: ê¸ˆì•¡ í¬ê¸° ë¹„êµ
    public boolean isLessThan(Money other) {
        return amount.compareTo(other.amount) < 0;
    }

    public boolean isGreaterThanOrEqual(Money other) {
        return amount.compareTo(other.amount) >= 0;
    }

    // âœ… ê°’ ê°ì²´ì˜ ë™ë“±ì„±: ë‚´ìš©ì´ ê°™ìœ¼ë©´ ê°™ì€ ê°ì²´
    @Override
    public boolean equals(Object object) {
        if (this == object) {
            return true;
        }

        if (!(object instanceof Money)) {
            return false;
        }

        Money other = (Money)object;
        return Objects.equals(amount.doubleValue(), other.amount.doubleValue());
    }

    @Override
    public int hashCode() {
        return Objects.hashCode(amount);
    }

    @Override
    public String toString() {
        return amount.toString() + "ì›";
    }
}
```

### Money í´ë˜ìŠ¤ì˜ í•µì‹¬ ì„¤ê³„ ì›ì¹™

#### 1ï¸âƒ£ ë¶ˆë³€ì„± (Immutability)

```java
Money price = Money.wons(10000);
Money discount = price.minus(Money.wons(1000));

// priceëŠ” ë³€í•˜ì§€ ì•ŠìŒ!
System.out.println(price);     // 10000ì›
System.out.println(discount);  // 9000ì›
```

**ì™œ ë¶ˆë³€ì„±ì´ ì¤‘ìš”í•œê°€?**
```java
// ê°€ë³€ ê°ì²´ì˜ ë¬¸ì œ
MutableMoney price = new MutableMoney(10000);
MutableMoney fee1 = price;
MutableMoney fee2 = price;

fee1.minus(1000);  // fee1ì„ ë³€ê²½í–ˆëŠ”ë°...

// price, fee1, fee2 ëª¨ë‘ 9000ì›! (ì˜ˆìƒì¹˜ ëª»í•œ ë³€ê²½)
System.out.println(price);  // 9000ì›
System.out.println(fee1);   // 9000ì›
System.out.println(fee2);   // 9000ì›
```

#### 2ï¸âƒ£ ê°’ ê°ì²´ (Value Object)

```java
Money money1 = Money.wons(1000);
Money money2 = Money.wons(1000);

// ê°’ì´ ê°™ìœ¼ë©´ ê°™ì€ ê°ì²´ë¡œ ì·¨ê¸‰
money1.equals(money2);  // true

// ì°¸ì¡°ê°€ ë‹¬ë¼ë„ ìƒê´€ì—†ìŒ
money1 == money2;  // false (ë‹¤ë¥¸ ì¸ìŠ¤í„´ìŠ¤)
```

#### 3ï¸âƒ£ íƒ€ì… ì•ˆì „ì„± (Type Safety)

```java
// âŒ ì»´íŒŒì¼ ì—ëŸ¬: Moneyì— intë¥¼ ë”í•  ìˆ˜ ì—†ìŒ
Money price = Money.wons(10000);
price = price + 1000;  // ì»´íŒŒì¼ ì—ëŸ¬!

// âœ… Moneyë¼ë¦¬ë§Œ ì—°ì‚° ê°€ëŠ¥
price = price.plus(Money.wons(1000));
```

---

## ğŸ¬ ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

ì½”ë“œê°€ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€ ë¨¼ì € ì‚´í´ë´…ì‹œë‹¤.

### ì˜í™” ìƒì„± ë° ì˜ˆë§¤ ì „ì²´ ê³¼ì •

```java
// 1ï¸âƒ£ í• ì¸ ì¡°ê±´ ìƒì„±
DiscountCondition sequenceCondition1 = new SequenceCondition(1);     // 1íšŒì°¨
DiscountCondition sequenceCondition2 = new SequenceCondition(10);    // 10íšŒì°¨
DiscountCondition periodCondition = new PeriodCondition(
    DayOfWeek.MONDAY,
    LocalTime.of(10, 0),
    LocalTime.of(11, 59)
);

// 2ï¸âƒ£ í• ì¸ ì •ì±… ìƒì„± (ê¸ˆì•¡ í• ì¸)
DiscountPolicy discountPolicy = new AmountDiscountPolicy(
    Money.wons(800),              // 800ì› í• ì¸
    sequenceCondition1,
    sequenceCondition2,
    periodCondition
);

// 3ï¸âƒ£ ì˜í™” ìƒì„±
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),            // ê¸°ë³¸ ìš”ê¸ˆ 10,000ì›
    discountPolicy
);

// 4ï¸âƒ£ ìƒì˜ ìƒì„± (1íšŒì°¨, ì›”ìš”ì¼ 10:30)
Screening screening = new Screening(
    avatar,
    1,                            // 1íšŒì°¨
    LocalDateTime.of(2024, 12, 16, 10, 30)  // ì›”ìš”ì¼ 10:30
);

// 5ï¸âƒ£ ì˜ˆë§¤ ì§„í–‰
Customer customer = new Customer("í™ê¸¸ë™", "user123");
Reservation reservation = screening.reserve(customer, 2);  // 2ëª… ì˜ˆë§¤

// ğŸ“Š ìµœì¢… ê²°ê³¼
// ê¸°ë³¸ ìš”ê¸ˆ: 10,000ì›
// í• ì¸ ê¸ˆì•¡: 800ì› (1íšŒì°¨ ì¡°ê±´ ë§Œì¡± ë˜ëŠ” ì›”ìš”ì¼ 10:00~12:00 ì¡°ê±´ ë§Œì¡±)
// 1ì¸ë‹¹ ìš”ê¸ˆ: 9,200ì›
// 2ëª… ì´ ìš”ê¸ˆ: 18,400ì›
```

### ì‹¤í–‰ íë¦„ ì¶”ì 

```
screening.reserve(customer, 2) í˜¸ì¶œ
    â”‚
    â”œâ”€> calculateFee(2) í˜¸ì¶œ
    â”‚     â”‚
    â”‚     â”œâ”€> movie.calculateMovieFee(this) í˜¸ì¶œ
    â”‚     â”‚     â”‚
    â”‚     â”‚     â”œâ”€> discountPolicy.calculateDiscountAmount(screening) í˜¸ì¶œ
    â”‚     â”‚     â”‚     â”‚
    â”‚     â”‚     â”‚     â”œâ”€> sequenceCondition1.isSatisfiedBy(screening)
    â”‚     â”‚     â”‚     â”‚     â””â”€> screening.isSequence(1) = true âœ…
    â”‚     â”‚     â”‚     â”‚
    â”‚     â”‚     â”‚     â”œâ”€> getDiscountAmount(screening) í˜¸ì¶œ
    â”‚     â”‚     â”‚     â”‚     â””â”€> return Money.wons(800)
    â”‚     â”‚     â”‚     â”‚
    â”‚     â”‚     â”‚     â””â”€> return Money.wons(800)
    â”‚     â”‚     â”‚
    â”‚     â”‚     â”œâ”€> fee.minus(Money.wons(800))
    â”‚     â”‚     â””â”€> return Money.wons(9200)  // 10,000 - 800
    â”‚     â”‚
    â”‚     â”œâ”€> Money.wons(9200).times(2)
    â”‚     â””â”€> return Money.wons(18400)
    â”‚
    â””â”€> new Reservation(customer, this, Money.wons(18400), 2)
```

ì´ì œ ê° í´ë˜ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ì–´ ìˆëŠ”ì§€ ìƒì„¸íˆ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

---

## ğŸ¬ í˜‘ë ¥ì˜ ì‹œì‘: Screening - ìƒì˜

> ğŸ“‚ **ì½”ë“œ**: [`Screening.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/Screening.java)

### ì—­í• ê³¼ ì±…ì„

`Screening`ì€ ë‹¤ìŒì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤:
- ì–´ë–¤ ì˜í™”ë¥¼ ìƒì˜í•˜ëŠ”ì§€ (`movie`)
- ëª‡ íšŒì°¨ ìƒì˜ì¸ì§€ (`sequence`)
- ì–¸ì œ ìƒì˜í•˜ëŠ”ì§€ (`whenScreened`)

`Screening`ì˜ ì±…ì„:
- ì˜ˆë§¤ ìƒì„±í•˜ê¸° (`reserve()`)
- ìƒì˜ ì •ë³´ ì œê³µí•˜ê¸° (ì‹œì‘ ì‹œê°„, ìˆœë²ˆ, ìš”ê¸ˆ)

### ì „ì²´ ì½”ë“œ ë¶„ì„

```java
package org.eternity.movie.step01;

import org.eternity.money.Money;
import java.time.LocalDateTime;

public class Screening {
    private Movie movie;               // ìƒì˜í•  ì˜í™”
    private int sequence;              // ìƒì˜ ìˆœë²ˆ
    private LocalDateTime whenScreened; // ìƒì˜ ì‹œì‘ ì‹œê°„

    public Screening(Movie movie, int sequence, LocalDateTime whenScreened) {
        this.movie = movie;
        this.sequence = sequence;
        this.whenScreened = whenScreened;
    }

    // âœ… ìº¡ìŠí™”: ì‹œì‘ ì‹œê°„ ì¡°íšŒ
    public LocalDateTime getStartTime() {
        return whenScreened;
    }

    // âœ… ìº¡ìŠí™”: ìˆœë²ˆ í™•ì¸
    //    ì™¸ë¶€ì—ì„œ sequenceë¥¼ ì§ì ‘ ì ‘ê·¼í•˜ì§€ ì•Šê³ 
    //    "ì´ ìƒì˜ì´ Në²ˆì§¸ì¸ê°€?"ë¼ëŠ” ì§ˆë¬¸ì— ë‹µë³€
    public boolean isSequence(int sequence) {
        return this.sequence == sequence;
    }

    // âœ… ë°ë©”í…Œë¥´ ë²•ì¹™ ì¤€ìˆ˜
    //    ì™¸ë¶€ì— movieë¥¼ ë…¸ì¶œí•˜ì§€ ì•Šê³ 
    //    movieì—ê²Œ ë¬¼ì–´ë³¸ ê²°ê³¼ë¥¼ ì „ë‹¬
    public Money getMovieFee() {
        return movie.getFee();
    }

    // âœ… í•µì‹¬ ì±…ì„: ì˜ˆë§¤ ìƒì„±
    //    Screeningì´ ì˜ˆë§¤ì˜ ìƒì„±ì„ ì±…ì„ì§
    public Reservation reserve(Customer customer, int audienceCount) {
        return new Reservation(
            customer,
            this,
            calculateFee(audienceCount),  // ìš”ê¸ˆ ê³„ì‚°
            audienceCount
        );
    }

    // âœ… private: ë‚´ë¶€ êµ¬í˜„ ê°ì¶¤
    //    ìš”ê¸ˆ ê³„ì‚° ë¡œì§ì€ ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ì•ŠìŒ
    private Money calculateFee(int audienceCount) {
        // movieì—ê²Œ 1ì¸ë‹¹ ìš”ê¸ˆì„ ë¬¼ì–´ë³´ê³ 
        // ì¸ì›ìˆ˜ë¥¼ ê³±í•´ì„œ ì´ ìš”ê¸ˆ ê³„ì‚°
        return movie.calculateMovieFee(this).times(audienceCount);
    }
}
```

### í˜‘ë ¥ ê³¼ì • ìƒì„¸ ë¶„ì„

```
ì‚¬ìš©ìê°€ ì˜ˆë§¤ë¥¼ ìš”ì²­í•˜ë©´:

screening.reserve(customer, 2)
     â†“
1. calculateFee(2) í˜¸ì¶œ (private)
     â†“
2. movie.calculateMovieFee(this) í˜¸ì¶œ
     â”‚
     â”‚  [Movieê°€ í• ì¸ ì •ì±…ì—ê²Œ ìœ„ì„]
     â”‚  discountPolicy.calculateDiscountAmount(screening)
     â”‚        â†“
     â”‚  [í• ì¸ ì •ì±…ì´ í• ì¸ ì¡°ê±´ í™•ì¸]
     â”‚  for each condition:
     â”‚    if condition.isSatisfiedBy(screening):
     â”‚      return getDiscountAmount(screening)
     â”‚        â†“
     â”‚  [í• ì¸ ê¸ˆì•¡ ë°˜í™˜]
     â”‚  â† Money (í• ì¸ ê¸ˆì•¡)
     â”‚
     â† Money (í• ì¸ ì ìš©ëœ 1ì¸ ìš”ê¸ˆ)
     â†“
3. 1ì¸ ìš”ê¸ˆ Ã— 2ëª… = ì´ ìš”ê¸ˆ
     â†“
4. new Reservation(customer, this, totalFee, 2)
     â†“
5. ì˜ˆë§¤ ì™„ë£Œ!
```

### ì™œ ì´ë ‡ê²Œ ì„¤ê³„í–ˆëŠ”ê°€?

#### ğŸ”’ ìº¡ìŠí™”: ë¬»ì§€ ë§ê³  ì‹œì¼œë¼

```java
// âŒ ë‚˜ìœ ì˜ˆ: ì™¸ë¶€ì—ì„œ Screening ë‚´ë¶€ë¥¼ ì¡°ì‘
Screening screening = ...;
Movie movie = screening.getMovie();  // movieë¥¼ êº¼ë‚´ê³ 
Money fee = movie.getFee();           // feeë¥¼ êº¼ë‚´ê³ 
Money discount = ...;                 // í• ì¸ì„ ê³„ì‚°í•˜ê³ 
Money totalFee = fee.minus(discount).times(audienceCount);

// âœ… ì¢‹ì€ ì˜ˆ: Screeningì—ê²Œ ìš”ì²­
Screening screening = ...;
Reservation reservation = screening.reserve(customer, audienceCount);
```

#### ğŸ¯ ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)

`Screening`ì˜ ë‹¨ í•˜ë‚˜ì˜ ì±…ì„: **ì˜ˆë§¤ë¥¼ ìƒì„±í•œë‹¤**

```java
// Screeningì´ í•˜ëŠ” ì¼:
1. ì˜ˆë§¤ ìƒì„±í•˜ê¸°
   â””â”€ ë‚´ë¶€ì ìœ¼ë¡œ ìš”ê¸ˆ ê³„ì‚° í•„ìš”
       â””â”€ Movieì—ê²Œ 1ì¸ë‹¹ ìš”ê¸ˆ ë¬¼ì–´ë³´ê¸°
           â””â”€ ì¸ì›ìˆ˜ ê³±í•˜ê¸°

// Screeningì´ í•˜ì§€ ì•ŠëŠ” ì¼:
âœ— í• ì¸ ì •ì±… ê²°ì •í•˜ê¸° â†’ Movieì˜ ì±…ì„
âœ— í• ì¸ ì¡°ê±´ í™•ì¸í•˜ê¸° â†’ DiscountConditionì˜ ì±…ì„
âœ— í• ì¸ ê¸ˆì•¡ ê³„ì‚°í•˜ê¸° â†’ DiscountPolicyì˜ ì±…ì„
```

---

## ğŸ¥ ì¤‘ì‹¬ ê°ì²´: Movie - ì˜í™”

> ğŸ“‚ **ì½”ë“œ**: [`Movie.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/Movie.java)

### í•µì‹¬ ì„¤ê³„: ì¶”ìƒí™”ì— ì˜ì¡´í•˜ê¸°

```java
package org.eternity.movie.step01;

import org.eternity.money.Money;
import java.time.Duration;

public class Movie {
    private String title;           // ì œëª©
    private Duration runningTime;   // ìƒì˜ ì‹œê°„
    private Money fee;              // ê¸°ë³¸ ìš”ê¸ˆ
    
    // âœ… í•µì‹¬: ì¶”ìƒí™”(DiscountPolicy)ì— ì˜ì¡´
    //    êµ¬ì²´ í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤/ì¶”ìƒ í´ë˜ìŠ¤ì— ì˜ì¡´
    private DiscountPolicy discountPolicy;

    public Movie(String title, Duration runningTime, Money fee, 
                 DiscountPolicy discountPolicy) {
        this.title = title;
        this.runningTime = runningTime;
        this.fee = fee;
        this.discountPolicy = discountPolicy;
    }

    public Money getFee() {
        return fee;
    }

    // âœ… í•µì‹¬ ë©”ì„œë“œ: ì˜í™” ìš”ê¸ˆ ê³„ì‚°
    public Money calculateMovieFee(Screening screening) {
        // ê¸°ë³¸ ìš”ê¸ˆì—ì„œ í• ì¸ ê¸ˆì•¡ì„ ëº€ë‹¤
        // "ì–´ë–»ê²Œ" í• ì¸í•˜ëŠ”ì§€ëŠ” discountPolicyê°€ ì•Œê³  ìˆìŒ
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```

### ğŸ¤” ë†€ë¼ìš´ ì‚¬ì‹¤: MovieëŠ” í• ì¸ ì •ì±…ì„ ëª¨ë¥¸ë‹¤!

```java
public Money calculateMovieFee(Screening screening) {
    return fee.minus(discountPolicy.calculateDiscountAmount(screening));
}
```

**ì´ ì½”ë“œì˜ ë†€ë¼ìš´ ì **:

1. **MovieëŠ” í• ì¸ ì •ì±…ì˜ ì¢…ë¥˜ë¥¼ ëª¨ë¥¸ë‹¤**
   ```java
   // Movie í´ë˜ìŠ¤ ì–´ë””ì—ë„ ì´ëŸ° ì½”ë“œê°€ ì—†ìŒ:
   if (discountPolicy instanceof AmountDiscountPolicy) {
       // ê¸ˆì•¡ í• ì¸
   } else if (discountPolicy instanceof PercentDiscountPolicy) {
       // ë¹„ìœ¨ í• ì¸
   }
   ```

2. **MovieëŠ” í• ì¸ ê¸ˆì•¡ ê³„ì‚° ë°©ë²•ì„ ëª¨ë¥¸ë‹¤**
   ```java
   // MovieëŠ” ê·¸ì € ìš”ì²­ë§Œ í•  ë¿
   discountPolicy.calculateDiscountAmount(screening);
   
   // ì‹¤ì œ ê³„ì‚°ì€ DiscountPolicyê°€ ë‹´ë‹¹
   // - AmountDiscountPolicy: 800ì› ì°¨ê°
   // - PercentDiscountPolicy: 10% ì°¨ê°
   ```

3. **MovieëŠ” í• ì¸ ì¡°ê±´ì„ ëª¨ë¥¸ë‹¤**
   ```java
   // ìˆœë²ˆ ì¡°ê±´ì¸ì§€, ê¸°ê°„ ì¡°ê±´ì¸ì§€ ì „í˜€ ëª¨ë¦„
   // DiscountPolicyê°€ ì•Œì•„ì„œ ì²˜ë¦¬
   ```

### ì™œ ì´ê²Œ ì¤‘ìš”í•œê°€?

#### ë³€ê²½ì— ìœ ì—°í•œ ì½”ë“œ

```java
// ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì¶”ê°€: ê³ ì • ê¸ˆì•¡ 1000ì› í• ì¸
public class FixedDiscountPolicy extends DiscountPolicy {
    @Override
    protected Money getDiscountAmount(Screening screening) {
        return Money.wons(1000);
    }
}

// Movie ì½”ë“œ ë³€ê²½ ì—†ì´ ë°”ë¡œ ì‚¬ìš© ê°€ëŠ¥!
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new FixedDiscountPolicy(...)  // ìƒˆ ì •ì±… ì ìš©
);
```

**Movie í´ë˜ìŠ¤ëŠ” ë‹¨ í•œ ì¤„ë„ ìˆ˜ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!**

ì´ê²ƒì´ ë°”ë¡œ **"êµ¬í˜„ì´ ì•„ë‹Œ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼"**ì˜ ì˜ë¯¸ì…ë‹ˆë‹¤.

---

## ğŸ’³ ì˜ˆë§¤ ê²°ê³¼: Reservation - ì˜ˆë§¤

> ğŸ“‚ **ì½”ë“œ**: [`Reservation.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/Reservation.java)

```java
package org.eternity.movie.step01;

import org.eternity.money.Money;

public class Reservation {
    private Customer customer;      // ì˜ˆë§¤í•œ ê³ ê°
    private Screening screening;    // ì˜ˆë§¤í•œ ìƒì˜
    private Money fee;              // ì˜ˆë§¤ ìš”ê¸ˆ
    private int audienceCount;      // ì¸ì›ìˆ˜

    public Reservation(Customer customer, Screening screening, 
                      Money fee, int audienceCount) {
        this.customer = customer;
        this.screening = screening;
        this.fee = fee;
        this.audienceCount = audienceCount;
    }
}
```

ğŸ’¡ **ì„¤ëª…**:
- ì˜ˆë§¤ ì •ë³´ë¥¼ ë‹´ëŠ” ë‹¨ìˆœí•œ ë°ì´í„° í´ë˜ìŠ¤
- ì˜ˆë§¤ ì„±ê³µì˜ ê²°ê³¼ë¬¼
- ì‹¤ì œë¡œëŠ” getter ë©”ì„œë“œë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ì¶”ê°€ë  ìˆ˜ ìˆìŒ

---

## ğŸ« Step 01: ì¶”ìƒ í´ë˜ìŠ¤ ê¸°ë°˜ í• ì¸ ì •ì±…

> ğŸ“‚ **ì „ì²´ ì½”ë“œ**: [step01 ë””ë ‰í† ë¦¬](https://github.com/eternity-oop/object/tree/master/chapter02/src/main/java/org/eternity/movie/step01)

### ì„¤ê³„ êµ¬ì¡°

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ DiscountPolicy   â”‚
                    â”‚ (abstract class) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–³
                            â”‚ extends
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚             â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Amount          â”‚ â”‚ Percent       â”‚ â”‚ None            â”‚
â”‚ DiscountPolicy  â”‚ â”‚ DiscountPolicyâ”‚ â”‚ DiscountPolicy  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“œ DiscountPolicy - ì¶”ìƒ í´ë˜ìŠ¤

> ğŸ“‚ **ì½”ë“œ**: [`DiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/DiscountPolicy.java)

```java
package org.eternity.movie.step01;

import org.eternity.money.Money;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public abstract class DiscountPolicy {
    // âœ… í• ì¸ ì¡°ê±´ ëª©ë¡
    //    í•˜ë‚˜ì˜ í• ì¸ ì •ì±…ì€ ì—¬ëŸ¬ ê°œì˜ í• ì¸ ì¡°ê±´ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ
    private List<DiscountCondition> conditions = new ArrayList<>();

    // âœ… ê°€ë³€ ì¸ì: ì—¬ëŸ¬ ê°œì˜ í• ì¸ ì¡°ê±´ì„ ë°›ì„ ìˆ˜ ìˆìŒ
    public DiscountPolicy(DiscountCondition... conditions) {
        this.conditions = Arrays.asList(conditions);
    }

    // âœ… TEMPLATE METHOD íŒ¨í„´
    //    ì „ì²´ì ì¸ íë¦„ì€ ì—¬ê¸°ì„œ ì •ì˜
    //    ì„¸ë¶€ êµ¬í˜„ì€ ìì‹ í´ë˜ìŠ¤ì— ìœ„ì„
    public Money calculateDiscountAmount(Screening screening) {
        // í• ì¸ ì¡°ê±´ì„ í•˜ë‚˜ì”© í™•ì¸
        for(DiscountCondition each : conditions) {
            // ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²ƒì´ í•˜ë‚˜ë¼ë„ ìˆìœ¼ë©´
            if (each.isSatisfiedBy(screening)) {
                // í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•´ì„œ ë°˜í™˜
                // (ê³„ì‚° ë°©ë²•ì€ ìì‹ í´ë˜ìŠ¤ê°€ ê²°ì •)
                return getDiscountAmount(screening);
            }
        }

        // ë§Œì¡±í•˜ëŠ” ì¡°ê±´ì´ ì—†ìœ¼ë©´ í• ì¸ ì—†ìŒ
        return Money.ZERO;
    }

    // âœ… ì¶”ìƒ ë©”ì„œë“œ: ìì‹ í´ë˜ìŠ¤ê°€ ë°˜ë“œì‹œ êµ¬í˜„
    //    "ì–¼ë§ˆë‚˜" í• ì¸í• ì§€ëŠ” ìì‹ í´ë˜ìŠ¤ê°€ ê²°ì •
    abstract protected Money getDiscountAmount(Screening screening);
}
```

### ğŸ¨ ë””ìì¸ íŒ¨í„´: TEMPLATE METHOD

**í•µì‹¬ ì•„ì´ë””ì–´**:
> ì•Œê³ ë¦¬ì¦˜ì˜ ê³¨ê²©ì„ ì •ì˜í•˜ê³ , ì„¸ë¶€ ë‹¨ê³„ëŠ” ìì‹ í´ë˜ìŠ¤ì—ê²Œ ìœ„ì„

```
calculateDiscountAmount()ì˜ íë¦„:

1. í• ì¸ ì¡°ê±´ ëª©ë¡ì„ ìˆœíšŒí•œë‹¤           â† ë¶€ëª¨ê°€ ì •ì˜
     â†“
2. ê° ì¡°ê±´ì„ í•˜ë‚˜ì”© í™•ì¸í•œë‹¤           â† ë¶€ëª¨ê°€ ì •ì˜
     â†“
3. ì¡°ê±´ì„ ë§Œì¡±í•˜ë©´?
     â†“
4. getDiscountAmount() í˜¸ì¶œ          â† ìì‹ì´ êµ¬í˜„
     â†“
5. í• ì¸ ê¸ˆì•¡ ë°˜í™˜                     â† ë¶€ëª¨ê°€ ì •ì˜
```

**ì™œ ì´ë ‡ê²Œ ì„¤ê³„í–ˆëŠ”ê°€?**

```java
// âœ… ê³µí†µ ë¡œì§(í• ì¸ ì¡°ê±´ í™•ì¸)ì€ ì¬ì‚¬ìš©
// âœ… ë³€í•˜ëŠ” ë¶€ë¶„(í• ì¸ ê¸ˆì•¡ ê³„ì‚°)ë§Œ ìì‹ í´ë˜ìŠ¤ê°€ êµ¬í˜„

// ì˜ˆì‹œ 1: ê¸ˆì•¡ í• ì¸
class AmountDiscountPolicy extends DiscountPolicy {
    protected Money getDiscountAmount(Screening screening) {
        return Money.wons(800);  // í•­ìƒ 800ì›
    }
}

// ì˜ˆì‹œ 2: ë¹„ìœ¨ í• ì¸
class PercentDiscountPolicy extends DiscountPolicy {
    protected Money getDiscountAmount(Screening screening) {
        return screening.getMovieFee().times(0.1);  // 10% í• ì¸
    }
}
```

### ğŸ’° AmountDiscountPolicy - ê¸ˆì•¡ í• ì¸

> ğŸ“‚ **ì½”ë“œ**: [`AmountDiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/pricing/AmountDiscountPolicy.java)

```java
package org.eternity.movie.step01.pricing;

import org.eternity.money.Money;
import org.eternity.movie.step01.DiscountCondition;
import org.eternity.movie.step01.DiscountPolicy;
import org.eternity.movie.step01.Screening;

public class AmountDiscountPolicy extends DiscountPolicy {
    private Money discountAmount;  // í• ì¸ ê¸ˆì•¡

    public AmountDiscountPolicy(Money discountAmount, 
                               DiscountCondition... conditions) {
        super(conditions);  // ë¶€ëª¨ì—ê²Œ í• ì¸ ì¡°ê±´ ì „ë‹¬
        this.discountAmount = discountAmount;
    }

    @Override
    protected Money getDiscountAmount(Screening screening) {
        // í•­ìƒ ê³ ì • ê¸ˆì•¡ í• ì¸
        return discountAmount;
    }
}
```

**ì‚¬ìš© ì˜ˆì‹œ**:
```java
// "ì•„ë°”íƒ€"ëŠ” 800ì› ê¸ˆì•¡ í• ì¸
//  - 1íšŒì°¨ ìƒì˜ ì‹œ
//  - 10íšŒì°¨ ìƒì˜ ì‹œ
//  - ì›”ìš”ì¼ 10:00~12:00
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(
        Money.wons(800),                      // 800ì› í• ì¸
        new SequenceCondition(1),             // 1íšŒì°¨
        new SequenceCondition(10),            // 10íšŒì°¨
        new PeriodCondition(                  // ì›”ìš”ì¼ ì˜¤ì „
            DayOfWeek.MONDAY,
            LocalTime.of(10, 0),
            LocalTime.of(11, 59)
        )
    )
);

// ì˜ˆë§¤ ì‹œ:
// 10000ì› - 800ì› = 9200ì› Ã— ì¸ì›ìˆ˜
```

### ğŸ“Š PercentDiscountPolicy - ë¹„ìœ¨ í• ì¸

> ğŸ“‚ **ì½”ë“œ**: [`PercentDiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/pricing/PercentDiscountPolicy.java)

```java
package org.eternity.movie.step01.pricing;

import org.eternity.money.Money;
import org.eternity.movie.step01.DiscountCondition;
import org.eternity.movie.step01.DiscountPolicy;
import org.eternity.movie.step01.Screening;

public class PercentDiscountPolicy extends DiscountPolicy {
    private double percent;  // í• ì¸ ë¹„ìœ¨

    public PercentDiscountPolicy(double percent, 
                                DiscountCondition... conditions) {
        super(conditions);
        this.percent = percent;
    }

    @Override
    protected Money getDiscountAmount(Screening screening) {
        // ì˜í™” ìš”ê¸ˆì˜ ì¼ì • ë¹„ìœ¨ë§Œí¼ í• ì¸
        return screening.getMovieFee().times(percent);
    }
}
```

**ì‚¬ìš© ì˜ˆì‹œ**:
```java
// "íƒ€ì´íƒ€ë‹‰"ì€ 10% ë¹„ìœ¨ í• ì¸
//  - 2íšŒì°¨ ìƒì˜ ì‹œ
//  - ëª©ìš”ì¼ 14:00~21:00
Movie titanic = new Movie(
    "íƒ€ì´íƒ€ë‹‰",
    Duration.ofMinutes(180),
    Money.wons(11000),
    new PercentDiscountPolicy(
        0.1,                                  // 10% í• ì¸
        new SequenceCondition(2),             // 2íšŒì°¨
        new PeriodCondition(                  // ëª©ìš”ì¼ ì˜¤í›„
            DayOfWeek.THURSDAY,
            LocalTime.of(14, 0),
            LocalTime.of(20, 59)
        )
    )
);

// ì˜ˆë§¤ ì‹œ:
// 11000ì› - (11000ì› Ã— 0.1) = 9900ì› Ã— ì¸ì›ìˆ˜
```

### â›” NoneDiscountPolicy - í• ì¸ ì—†ìŒ (step01ì˜ ë¬¸ì œì )

> ğŸ“‚ **ì½”ë“œ**: [`NoneDiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/pricing/NoneDiscountPolicy.java)

```java
package org.eternity.movie.step01.pricing;

import org.eternity.money.Money;
import org.eternity.movie.step01.DiscountPolicy;
import org.eternity.movie.step01.Screening;

public class NoneDiscountPolicy extends DiscountPolicy {
    @Override
    protected Money getDiscountAmount(Screening screening) {
        return Money.ZERO;  // í• ì¸ ì—†ìŒ
    }
}
```

### âŒ Step 01ì˜ ë¬¸ì œì 

```java
public class NoneDiscountPolicy extends DiscountPolicy {
    // âŒ ë¬¸ì œ: getDiscountAmountë¥¼ êµ¬í˜„í•´ì•¼ í•¨
    //    í•˜ì§€ë§Œ ì´ ë©”ì„œë“œëŠ” ì ˆëŒ€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ!
    
    // ì™œëƒí•˜ë©´ ë¶€ëª¨ì˜ calculateDiscountAmountì—ì„œ:
    // for(DiscountCondition each : conditions) {
    //     if (each.isSatisfiedBy(screening)) {
    //         return getDiscountAmount(screening);  â† ì¡°ê±´ì´ ì—†ìœ¼ë©´ ì‹¤í–‰ ì•ˆë¨
    //     }
    // }
    // return Money.ZERO;  â† í•­ìƒ ì—¬ê¸°ì„œ ë°˜í™˜
    
    @Override
    protected Money getDiscountAmount(Screening screening) {
        return Money.ZERO;  // ì˜ë¯¸ ì—†ëŠ” êµ¬í˜„
    }
}
```

**ê°œë…ì  í˜¼ë€**:

```
NoneDiscountPolicyì˜ ì˜ë„:
"í• ì¸ ì¡°ê±´ì´ ì—†ë‹¤" â†’ calculateDiscountAmountë¥¼ ì˜¤ë²„ë¼ì´ë“œí•´ì•¼ ìì—°ìŠ¤ëŸ¬ì›€

í•˜ì§€ë§Œ í˜„ì¬ êµ¬ì¡°:
"í• ì¸ ê¸ˆì•¡ ê³„ì‚° ë°©ë²•ì´ ì—†ë‹¤" â†’ getDiscountAmountë¥¼ ì˜¤ë²„ë¼ì´ë“œ (ë¶€ìì—°ìŠ¤ëŸ¬ì›€)
```

ì´ ë¬¸ì œë¥¼ **Step 02**ì—ì„œ í•´ê²°í•©ë‹ˆë‹¤!

---

## ğŸ” í• ì¸ ì¡°ê±´: DiscountCondition

> ğŸ“‚ **ì½”ë“œ**: [`DiscountCondition.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/DiscountCondition.java)

```java
package org.eternity.movie.step01;

public interface DiscountCondition {
    // ì´ ìƒì˜ì´ í• ì¸ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ê°€?
    boolean isSatisfiedBy(Screening screening);
}
```

### ğŸ”¢ SequenceCondition - ìˆœë²ˆ ì¡°ê±´

> ğŸ“‚ **ì½”ë“œ**: [`SequenceCondition.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/pricing/SequenceCondition.java)

```java
package org.eternity.movie.step01.pricing;

import org.eternity.movie.step01.DiscountCondition;
import org.eternity.movie.step01.Screening;

public class SequenceCondition implements DiscountCondition {
    private int sequence;  // í• ì¸ ëŒ€ìƒ ìˆœë²ˆ

    public SequenceCondition(int sequence) {
        this.sequence = sequence;
    }

    public boolean isSatisfiedBy(Screening screening) {
        // ìƒì˜ ìˆœë²ˆì´ ì¼ì¹˜í•˜ë©´ í• ì¸
        return screening.isSequence(sequence);
    }
}
```

**ì˜ˆì‹œ**:
```java
new SequenceCondition(1)   // 1íšŒì°¨ ìƒì˜ ì‹œ í• ì¸
new SequenceCondition(10)  // 10íšŒì°¨ ìƒì˜ ì‹œ í• ì¸
```

### ğŸ“… PeriodCondition - ê¸°ê°„ ì¡°ê±´

> ğŸ“‚ **ì½”ë“œ**: [`PeriodCondition.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step01/pricing/PeriodCondition.java)

```java
package org.eternity.movie.step01.pricing;

import org.eternity.movie.step01.DiscountCondition;
import org.eternity.movie.step01.Screening;
import java.time.DayOfWeek;
import java.time.LocalTime;

public class PeriodCondition implements DiscountCondition {
    private DayOfWeek dayOfWeek;  // ìš”ì¼
    private LocalTime startTime;  // ì‹œì‘ ì‹œê°„
    private LocalTime endTime;    // ì¢…ë£Œ ì‹œê°„

    public PeriodCondition(DayOfWeek dayOfWeek, 
                          LocalTime startTime, 
                          LocalTime endTime) {
        this.dayOfWeek = dayOfWeek;
        this.startTime = startTime;
        this.endTime = endTime;
    }

    public boolean isSatisfiedBy(Screening screening) {
        // 1. ìš”ì¼ì´ ì¼ì¹˜í•˜ê³ 
        // 2. ì‹œì‘ ì‹œê°„ ì´í›„ì´ê³ 
        // 3. ì¢…ë£Œ ì‹œê°„ ì´ì „ì´ë©´
        // â†’ í• ì¸
        return screening.getStartTime().getDayOfWeek().equals(dayOfWeek) &&
               startTime.compareTo(screening.getStartTime().toLocalTime()) <= 0 &&
               endTime.compareTo(screening.getStartTime().toLocalTime()) >= 0;
    }
}
```

**ì˜ˆì‹œ**:
```java
// ì›”ìš”ì¼ 10:00~12:00
new PeriodCondition(
    DayOfWeek.MONDAY,
    LocalTime.of(10, 0),
    LocalTime.of(11, 59)
)

// ëª©ìš”ì¼ 14:00~21:00
new PeriodCondition(
    DayOfWeek.THURSDAY,
    LocalTime.of(14, 0),
    LocalTime.of(20, 59)
)
```

---

## ğŸ¯ Step 02: ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í• ì¸ ì •ì±… (ê°œì„ )

> ğŸ“‚ **ì „ì²´ ì½”ë“œ**: [step02 ë””ë ‰í† ë¦¬](https://github.com/eternity-oop/object/tree/master/chapter02/src/main/java/org/eternity/movie/step02)

### Step 01 â†’ Step 02 ë³€ê²½ì‚¬í•­

**ë¬¸ì œ**: `NoneDiscountPolicy`ê°€ `getDiscountAmount`ë¥¼ êµ¬í˜„í•´ì•¼ í•˜ëŠ”ë°, ì´ ë©”ì„œë“œëŠ” ì ˆëŒ€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ

**í•´ê²°**: `DiscountPolicy`ë¥¼ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬

```
Step 01:
DiscountPolicy (abstract class)
   â”œâ”€ AmountDiscountPolicy
   â”œâ”€ PercentDiscountPolicy
   â””â”€ NoneDiscountPolicy â† getDiscountAmountë¥¼ ì–µì§€ë¡œ êµ¬í˜„

Step 02:
DiscountPolicy (interface)
   â”œâ”€ DefaultDiscountPolicy (abstract class)
   â”‚    â”œâ”€ AmountDiscountPolicy
   â”‚    â””â”€ PercentDiscountPolicy
   â””â”€ NoneDiscountPolicy â† calculateDiscountAmountë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ êµ¬í˜„
```

### ğŸ“œ DiscountPolicy - ì¸í„°í˜ì´ìŠ¤

> ğŸ“‚ **ì½”ë“œ**: [`DiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step02/DiscountPolicy.java)

```java
package org.eternity.movie.step02;

import org.eternity.money.Money;

// âœ… ì¸í„°í˜ì´ìŠ¤ë¡œ ë³€ê²½
//    ëª¨ë“  í• ì¸ ì •ì±…ì´ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê³„ì•½
public interface DiscountPolicy {
    Money calculateDiscountAmount(Screening screening);
}
```

### ğŸ“œ DefaultDiscountPolicy - ê¸°ë³¸ êµ¬í˜„

> ğŸ“‚ **ì½”ë“œ**: [`DefaultDiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step02/DefaultDiscountPolicy.java)

```java
package org.eternity.movie.step02;

import org.eternity.money.Money;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

// âœ… ê¸°ì¡´ DiscountPolicyì˜ êµ¬í˜„ì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì˜´
//    í• ì¸ ì¡°ê±´ì„ í™•ì¸í•˜ëŠ” ì •ì±…ë“¤ì˜ ê¸°ë³¸ êµ¬í˜„
public abstract class DefaultDiscountPolicy implements DiscountPolicy {
    private List<DiscountCondition> conditions = new ArrayList<>();

    public DefaultDiscountPolicy(DiscountCondition... conditions) {
        this.conditions = Arrays.asList(conditions);
    }

    @Override
    public Money calculateDiscountAmount(Screening screening) {
        for(DiscountCondition each : conditions) {
            if (each.isSatisfiedBy(screening)) {
                return getDiscountAmount(screening);
            }
        }

        return Money.ZERO;
    }

    abstract protected Money getDiscountAmount(Screening screening);
}
```

### âœ… AmountDiscountPolicy - ë³€ê²½ ì—†ìŒ

```java
// DefaultDiscountPolicyë¥¼ ìƒì†
public class AmountDiscountPolicy extends DefaultDiscountPolicy {
    private Money discountAmount;

    public AmountDiscountPolicy(Money discountAmount, 
                               DiscountCondition... conditions) {
        super(conditions);
        this.discountAmount = discountAmount;
    }

    @Override
    protected Money getDiscountAmount(Screening screening) {
        return discountAmount;
    }
}
```

### âœ… PercentDiscountPolicy - ë³€ê²½ ì—†ìŒ

```java
// DefaultDiscountPolicyë¥¼ ìƒì†
public class PercentDiscountPolicy extends DefaultDiscountPolicy {
    private double percent;

    public PercentDiscountPolicy(double percent, 
                                DiscountCondition... conditions) {
        super(conditions);
        this.percent = percent;
    }

    @Override
    protected Money getDiscountAmount(Screening screening) {
        return screening.getMovieFee().times(percent);
    }
}
```

### âœ¨ NoneDiscountPolicy - ê°œì„ !

> ğŸ“‚ **ì½”ë“œ**: [`NoneDiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter02/src/main/java/org/eternity/movie/step02/pricing/NoneDiscountPolicy.java)

```java
package org.eternity.movie.step02.pricing;

import org.eternity.money.Money;
import org.eternity.movie.step02.DiscountPolicy;
import org.eternity.movie.step02.Screening;

// âœ… DiscountPolicy ì¸í„°í˜ì´ìŠ¤ë¥¼ ì§ì ‘ êµ¬í˜„
//    DefaultDiscountPolicyë¥¼ ìƒì†í•˜ì§€ ì•ŠìŒ
public class NoneDiscountPolicy implements DiscountPolicy {
    @Override
    public Money calculateDiscountAmount(Screening screening) {
        // âœ… ìì—°ìŠ¤ëŸ¬ì›€: "í• ì¸ ê¸ˆì•¡ ê³„ì‚°í•˜ë©´ 0ì›"
        return Money.ZERO;
    }
}
```

**ê°œì„  íš¨ê³¼**:

```
Step 01 (ë¶€ìì—°ìŠ¤ëŸ¬ì›€):
NoneDiscountPolicy
  â†’ getDiscountAmount êµ¬í˜„ (í˜¸ì¶œë˜ì§€ ì•ŠëŠ” ë©”ì„œë“œ)
  â†’ "í• ì¸ ê¸ˆì•¡ì„ ì–´ë–»ê²Œ ê³„ì‚°í•˜ëŠ”ê°€?"ì— ë‹µë³€

Step 02 (ìì—°ìŠ¤ëŸ¬ì›€):
NoneDiscountPolicy  
  â†’ calculateDiscountAmount êµ¬í˜„
  â†’ "í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•˜ë©´ ì–¼ë§ˆì¸ê°€?"ì— ë‹µë³€
```

### ì„¤ê³„ êµ¬ì¡° ë¹„êµ

```
Step 02 ìµœì¢… êµ¬ì¡°:

                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ DiscountPolicy   â”‚
                 â”‚   (interface)    â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â–³
                          â”‚ implements
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DefaultDiscountPolicyâ”‚      â”‚NoneDiscountPolicyâ”‚
â”‚  (abstract class)    â”‚      â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â–³
           â”‚ extends
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
     â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Amount â”‚  â”‚Percent â”‚
â”‚Discountâ”‚  â”‚Discountâ”‚
â”‚ Policy â”‚  â”‚ Policy â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ­ í•µì‹¬ ê°œë…: ë‹¤í˜•ì„± (Polymorphism)

### ì»´íŒŒì¼ ì‹œê°„ vs ì‹¤í–‰ ì‹œê°„ ì˜ì¡´ì„±

```java
// ì»´íŒŒì¼ ì‹œê°„: MovieëŠ” DiscountPolicyì— ì˜ì¡´
public class Movie {
    private DiscountPolicy discountPolicy;
    
    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}

// ì‹¤í–‰ ì‹œê°„: ì‹¤ì œë¡œëŠ” êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(...)  // â† ì‹¤í–‰ ì‹œì ì— ê²°ì •!
);
```

**ë‹¤ì´ì–´ê·¸ë¨**:

```
ì»´íŒŒì¼ ì‹œê°„ ì˜ì¡´ì„±:
Movie â”€â”€â”€â”€â”€â”€â†’ DiscountPolicy (ì¸í„°í˜ì´ìŠ¤)

ì‹¤í–‰ ì‹œê°„ ì˜ì¡´ì„±:
Movie â”€â”€â”€â”€â”€â”€â†’ AmountDiscountPolicy (êµ¬ì²´ í´ë˜ìŠ¤)
       ë˜ëŠ”
Movie â”€â”€â”€â”€â”€â”€â†’ PercentDiscountPolicy (êµ¬ì²´ í´ë˜ìŠ¤)
       ë˜ëŠ”
Movie â”€â”€â”€â”€â”€â”€â†’ NoneDiscountPolicy (êµ¬ì²´ í´ë˜ìŠ¤)
```

### ë™ì  ë°”ì¸ë”© (Late Binding)

```java
Movie movie = ...;
Screening screening = ...;

// ì´ ë©”ì„œë“œ í˜¸ì¶œ ì‹œ:
movie.calculateMovieFee(screening)
  â†“
discountPolicy.calculateDiscountAmount(screening)
  â†“
// ì‹¤ì œ ì‹¤í–‰ë˜ëŠ” ë©”ì„œë“œëŠ”?
// â†’ ì‹¤í–‰ ì‹œì ì— ì—°ê²°ëœ ê°ì²´ì— ë”°ë¼ ê²°ì •!

// AmountDiscountPolicyì¸ ê²½ìš°:
DefaultDiscountPolicy.calculateDiscountAmount()
  â†’ AmountDiscountPolicy.getDiscountAmount()
  
// PercentDiscountPolicyì¸ ê²½ìš°:
DefaultDiscountPolicy.calculateDiscountAmount()
  â†’ PercentDiscountPolicy.getDiscountAmount()
  
// NoneDiscountPolicyì¸ ê²½ìš°:
NoneDiscountPolicy.calculateDiscountAmount()
```

### ë©”ì‹œì§€ì™€ ë©”ì„œë“œì˜ ë¶„ë¦¬

```java
// ë©”ì‹œì§€: "í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•´ì¤˜"
discountPolicy.calculateDiscountAmount(screening)

// ë©”ì„œë“œ: ì‹¤ì œ ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
// â†’ AmountDiscountPolicyì¼ ë•Œ: ê³ ì • ê¸ˆì•¡ ë°˜í™˜
// â†’ PercentDiscountPolicyì¼ ë•Œ: ë¹„ìœ¨ ê³„ì‚° í›„ ë°˜í™˜
// â†’ NoneDiscountPolicyì¼ ë•Œ: 0ì› ë°˜í™˜
```

**í•µì‹¬**:
> ê°™ì€ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ë„, ë°›ëŠ” ê°ì²´ì— ë”°ë¼ ë‹¤ë¥¸ ë©”ì„œë“œê°€ ì‹¤í–‰ëœë‹¤!

---

## ğŸ”„ ì‹¤í–‰ ì‹œì  í• ì¸ ì •ì±… ë³€ê²½

### ìƒì†ì˜ í•œê³„

```java
// âŒ ìƒì†ìœ¼ë¡œ í• ì¸ ì •ì±…ì„ êµ¬í˜„í–ˆë‹¤ë©´?
public class AmountDiscountMovie extends Movie {
    private Money discountAmount;
    // ...
}

public class PercentDiscountMovie extends Movie {
    private double percent;
    // ...
}

// ë¬¸ì œ: ì‹¤í–‰ ì‹œì ì— ì •ì±… ë³€ê²½ ë¶ˆê°€!
Movie avatar = new AmountDiscountMovie(...);
// ë¹„ìœ¨ í• ì¸ìœ¼ë¡œ ë°”ê¾¸ë ¤ë©´?
// â†’ ê°ì²´ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì•¼ í•¨ (ë¶ˆê°€ëŠ¥)
```

### í•©ì„±ì˜ ìœ ì—°ì„±

```java
// âœ… í•©ì„±ìœ¼ë¡œ í• ì¸ ì •ì±…ì„ êµ¬í˜„í–ˆìœ¼ë¯€ë¡œ
public class Movie {
    private DiscountPolicy discountPolicy;
    
    // ì‹¤í–‰ ì‹œì ì— ì •ì±… ë³€ê²½ ê°€ëŠ¥!
    public void changeDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}

// ì‚¬ìš©:
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(Money.wons(800), ...)
);

// ë‚˜ì¤‘ì— ì •ì±… ë³€ê²½!
avatar.changeDiscountPolicy(
    new PercentDiscountPolicy(0.1, ...)
);
```

**ìƒì† vs í•©ì„±**:

| ì¸¡ë©´ | ìƒì† | í•©ì„± |
|------|------|------|
| **ê²°í•© ì‹œì ** | ì»´íŒŒì¼ ì‹œì  | ì‹¤í–‰ ì‹œì  |
| **ë³€ê²½ ê°€ëŠ¥ì„±** | ë¶ˆê°€ëŠ¥ | ê°€ëŠ¥ |
| **ìº¡ìŠí™”** | ìœ„ë°˜ (ë¶€ëª¨ ë‚´ë¶€ ë…¸ì¶œ) | ìœ ì§€ (ì¸í„°í˜ì´ìŠ¤ë§Œ ì‚¬ìš©) |
| **ìœ ì—°ì„±** | ë‚®ìŒ | ë†’ìŒ |
| **ì‚¬ìš© ëª©ì ** | ì¸í„°í˜ì´ìŠ¤ ì¬ì‚¬ìš© | êµ¬í˜„ ì¬ì‚¬ìš© |

---

---

## ğŸ”¬ ì‹¤í–‰ ì‹œì  ìƒì„¸ ì¶”ì 

ê° í• ì¸ ì •ì±…ë³„ë¡œ ì‹¤ì œ ì½”ë“œê°€ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ëŠ”ì§€ ì™„ë²½í•˜ê²Œ ì¶”ì í•´ë´…ì‹œë‹¤.

### ì‹œë‚˜ë¦¬ì˜¤ 1: ê¸ˆì•¡ í• ì¸ (AmountDiscountPolicy)

```java
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(
        Money.wons(800),
        new SequenceCondition(1)
    )
);

Screening screening = new Screening(avatar, 1, ...);  // 1íšŒì°¨
screening.reserve(customer, 2);
```

**ì‹¤í–‰ ì¶”ì **:

```
1. screening.reserve(customer, 2)
   â†“
2. calculateFee(2)
   â†“
3. movie.calculateMovieFee(this)
   â”œâ”€ movie.fee = Money.wons(10000)
   â””â”€ movie.discountPolicy = AmountDiscountPolicy ì¸ìŠ¤í„´ìŠ¤
   â†“
4. discountPolicy.calculateDiscountAmount(screening)
   â†“ [DefaultDiscountPolicy.calculateDiscountAmount ì‹¤í–‰]
   
5. for (DiscountCondition each : conditions) {
       // conditions = [SequenceCondition(1)]
   â†“
6. condition.isSatisfiedBy(screening)
   â”œâ”€ SequenceCondition.isSatisfiedBy(screening) í˜¸ì¶œ
   â””â”€ screening.isSequence(1)
       â””â”€ this.sequence == 1 â†’ true âœ…
   â†“
7. getDiscountAmount(screening)  // ì¶”ìƒ ë©”ì„œë“œ í˜¸ì¶œ
   â†“ [ì‹¤ì œë¡œ AmountDiscountPolicy.getDiscountAmount ì‹¤í–‰]
   
8. return discountAmount;
   â””â”€ return Money.wons(800)
   â†“
9. movie.calculateMovieFeeì—ì„œ ê³„ì†
   fee.minus(Money.wons(800))
   â””â”€ Money.wons(10000).minus(Money.wons(800))
       â””â”€ return Money.wons(9200)
   â†“
10. calculateFeeì—ì„œ ê³„ì†
    Money.wons(9200).times(2)
    â””â”€ return Money.wons(18400)
    â†“
11. new Reservation(customer, screening, Money.wons(18400), 2)
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- 4ë²ˆì—ì„œ `discountPolicy`ëŠ” ì»´íŒŒì¼ ì‹œì ì—ëŠ” `DiscountPolicy` íƒ€ì…
- í•˜ì§€ë§Œ ì‹¤í–‰ ì‹œì ì—ëŠ” `AmountDiscountPolicy` ì¸ìŠ¤í„´ìŠ¤
- 7ë²ˆì—ì„œ `getDiscountAmount()`ëŠ” **ë™ì  ë°”ì¸ë”©**ìœ¼ë¡œ `AmountDiscountPolicy`ì˜ ë©”ì„œë“œ ì‹¤í–‰

---

### ì‹œë‚˜ë¦¬ì˜¤ 2: ë¹„ìœ¨ í• ì¸ (PercentDiscountPolicy)

```java
Movie titanic = new Movie(
    "íƒ€ì´íƒ€ë‹‰",
    Duration.ofMinutes(180),
    Money.wons(11000),
    new PercentDiscountPolicy(
        0.1,  // 10% í• ì¸
        new SequenceCondition(2)
    )
);

Screening screening = new Screening(titanic, 2, ...);  // 2íšŒì°¨
screening.reserve(customer, 3);
```

**ì‹¤í–‰ ì¶”ì **:

```
1~6. [ìœ„ì™€ ë™ì¼]
   SequenceCondition(2).isSatisfiedBy(screening)
   â””â”€ screening.isSequence(2) â†’ true âœ…
   â†“
7. getDiscountAmount(screening)
   â†“ [PercentDiscountPolicy.getDiscountAmount ì‹¤í–‰]
   
8. screening.getMovieFee().times(percent)
   â”œâ”€ screening.getMovieFee()
   â”‚   â””â”€ movie.getFee()
   â”‚       â””â”€ return Money.wons(11000)
   â””â”€ Money.wons(11000).times(0.1)
       â””â”€ return Money.wons(1100)  // 11,000 Ã— 10%
   â†“
9. fee.minus(Money.wons(1100))
   â””â”€ Money.wons(11000).minus(Money.wons(1100))
       â””â”€ return Money.wons(9900)
   â†“
10. Money.wons(9900).times(3)
    â””â”€ return Money.wons(29700)
    â†“
11. new Reservation(customer, screening, Money.wons(29700), 3)
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- ê°™ì€ `getDiscountAmount()` í˜¸ì¶œì´ì§€ë§Œ
- `PercentDiscountPolicy`ì˜ ë©”ì„œë“œê°€ ì‹¤í–‰ë¨
- ì´ê²ƒì´ **ë‹¤í˜•ì„±(Polymorphism)**

---

### ì‹œë‚˜ë¦¬ì˜¤ 3: í• ì¸ ì—†ìŒ (NoneDiscountPolicy)

```java
Movie starWars = new Movie(
    "ìŠ¤íƒ€ì›Œì¦ˆ",
    Duration.ofMinutes(210),
    Money.wons(10000),
    new NoneDiscountPolicy()
);

Screening screening = new Screening(starWars, 1, ...);
screening.reserve(customer, 2);
```

**ì‹¤í–‰ ì¶”ì **:

```
1~3. [ìœ„ì™€ ë™ì¼]
   â†“
4. discountPolicy.calculateDiscountAmount(screening)
   â†“ [NoneDiscountPolicy.calculateDiscountAmount ì‹¤í–‰]
   
5. return Money.ZERO;  // ë°”ë¡œ 0ì› ë°˜í™˜!
   â””â”€ DefaultDiscountPolicyë¥¼ ê±°ì¹˜ì§€ ì•ŠìŒ
   â†“
6. fee.minus(Money.ZERO)
   â””â”€ Money.wons(10000).minus(Money.ZERO)
       â””â”€ return Money.wons(10000)
   â†“
7. Money.wons(10000).times(2)
   â””â”€ return Money.wons(20000)
   â†“
8. new Reservation(customer, screening, Money.wons(20000), 2)
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `NoneDiscountPolicy`ëŠ” í• ì¸ ì¡°ê±´ì„ í™•ì¸í•˜ì§€ ì•ŠìŒ
- `calculateDiscountAmount()`ë¥¼ ì§ì ‘ êµ¬í˜„
- ì´ê²ƒì´ **Step 02ì˜ ê°œì„ ì **

---

### ì‹œë‚˜ë¦¬ì˜¤ 4: í• ì¸ ì¡°ê±´ ë¶ˆë§Œì¡±

```java
Movie avatar = new Movie(
    "ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(
        Money.wons(800),
        new SequenceCondition(1)  // 1íšŒì°¨ë§Œ í• ì¸
    )
);

Screening screening = new Screening(avatar, 5, ...);  // 5íšŒì°¨ (ì¡°ê±´ ë¶ˆë§Œì¡±)
screening.reserve(customer, 2);
```

**ì‹¤í–‰ ì¶”ì **:

```
1~5. [ìœ„ì™€ ë™ì¼]
   â†“
6. condition.isSatisfiedBy(screening)
   â””â”€ screening.isSequence(1)
       â””â”€ this.sequence(5) == 1 â†’ false âŒ
   â†“
7. forë¬¸ ì¢…ë£Œ (ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ê²ƒì´ ì—†ìŒ)
   â†“
8. return Money.ZERO;  // DefaultDiscountPolicyì—ì„œ 0ì› ë°˜í™˜
   â†“
9. fee.minus(Money.ZERO)
   â””â”€ return Money.wons(10000)  // í• ì¸ ì—†ìŒ
   â†“
10. Money.wons(10000).times(2)
    â””â”€ return Money.wons(20000)
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- í• ì¸ ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ `getDiscountAmount()`ê°€ í˜¸ì¶œë˜ì§€ ì•ŠìŒ
- `DefaultDiscountPolicy`ì—ì„œ `Money.ZERO` ë°˜í™˜
- ê²°ê³¼ì ìœ¼ë¡œ í• ì¸ ì—†ëŠ” ì •ìƒ ê°€ê²©

---

## ğŸ—ï¸ ì „ì²´ í˜‘ë ¥ ê³¼ì •

### ì˜ˆë§¤ ì „ì²´ íë¦„

```
1. ì‚¬ìš©ì ìš”ì²­
screening.reserve(customer, 2)

2. Screening: ìš”ê¸ˆ ê³„ì‚° ì‹œì‘
calculateFee(2)
  â†“
movie.calculateMovieFee(this)

3. Movie: í• ì¸ ì •ì±…ì— ìœ„ì„
discountPolicy.calculateDiscountAmount(screening)

4-1. AmountDiscountPolicyì¸ ê²½ìš°:
  â†“
DefaultDiscountPolicy.calculateDiscountAmount(screening)
  â†“
for each condition:
  if condition.isSatisfiedBy(screening):  // ì¡°ê±´ í™•ì¸
    â†“
    getDiscountAmount(screening)  // 800ì› ë°˜í™˜
  â†“
return Money.wons(800)

4-2. PercentDiscountPolicyì¸ ê²½ìš°:
  â†“
DefaultDiscountPolicy.calculateDiscountAmount(screening)
  â†“
for each condition:
  if condition.isSatisfiedBy(screening):  // ì¡°ê±´ í™•ì¸
    â†“
    getDiscountAmount(screening)  // 10% ê³„ì‚°
  â†“
return screening.getMovieFee().times(0.1)

4-3. NoneDiscountPolicyì¸ ê²½ìš°:
  â†“
NoneDiscountPolicy.calculateDiscountAmount(screening)
  â†“
return Money.ZERO

5. Movie: í• ì¸ ì ìš©
fee.minus(í• ì¸ê¸ˆì•¡)

6. Screening: ì¸ì›ìˆ˜ ê³±í•˜ê¸°
1ì¸ìš”ê¸ˆ.times(2)

7. Screening: ì˜ˆë§¤ ìƒì„±
new Reservation(customer, this, ì´ìš”ê¸ˆ, 2)

8. ì˜ˆë§¤ ì™„ë£Œ!
```

### ê°ì²´ë“¤ì˜ í˜‘ë ¥ ë‹¤ì´ì–´ê·¸ë¨

```
Customer         Screening         Movie         DiscountPolicy
   â”‚                â”‚                â”‚                   â”‚
   â”‚  reserve()     â”‚                â”‚                   â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                â”‚                   â”‚
   â”‚                â”‚ calculateFee() â”‚                   â”‚
   â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
   â”‚                â”‚                â”‚calculateDiscount()â”‚
   â”‚                â”‚                â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                â”‚                â”‚                   â”‚
   â”‚                â”‚                â”‚  [í• ì¸ ì¡°ê±´ í™•ì¸]    â”‚
   â”‚                â”‚                â”‚                   â”‚
   â”‚                â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                â”‚                â”‚   í• ì¸ ê¸ˆì•¡         â”‚
   â”‚                â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚
   â”‚                â”‚   1ì¸ ìš”ê¸ˆ       â”‚                   â”‚
   â”‚                â”‚                â”‚                   â”‚
   â”‚                â”‚ [ì¸ì›ìˆ˜ ê³±í•˜ê¸°]   â”‚                   â”‚
   â”‚                â”‚                â”‚                   â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚                   â”‚
   â”‚  Reservation   â”‚                â”‚                   â”‚
```

---

## ğŸ’¡ í•µì‹¬ ì„¤ê³„ ì›ì¹™

### 1ï¸âƒ£ ê°ì²´ì— ì´ˆì ì„ ë§ì¶°ë¼

```java
// âŒ í´ë˜ìŠ¤ ì¤‘ì‹¬ ì‚¬ê³ 
"ì–´ë–¤ í´ë˜ìŠ¤ê°€ í•„ìš”í•œê°€?"
"Movie í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì"
"DiscountPolicy í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì"

// âœ… ê°ì²´ ì¤‘ì‹¬ ì‚¬ê³ 
"ì˜í™” ì˜ˆë§¤ë¥¼ ìœ„í•´ ì–´ë–¤ ê°ì²´ë“¤ì´ í˜‘ë ¥í•˜ëŠ”ê°€?"
"ìƒì˜ ê°ì²´ê°€ ì˜ˆë§¤ë¥¼ ìƒì„±í•œë‹¤"
"ì˜í™” ê°ì²´ê°€ ìš”ê¸ˆì„ ê³„ì‚°í•œë‹¤"
"í• ì¸ ì •ì±… ê°ì²´ê°€ í• ì¸ ê¸ˆì•¡ì„ ê²°ì •í•œë‹¤"
```

### 2ï¸âƒ£ í˜‘ë ¥í•˜ëŠ” ê³µë™ì²´ë¡œ ë°”ë¼ë´ë¼

```java
// ê° ê°ì²´ì˜ ì±…ì„:
Screening  â†’ ì˜ˆë§¤ ìƒì„±
Movie      â†’ ìš”ê¸ˆ ê³„ì‚°
Discount   â†’ í• ì¸ ê²°ì •
Condition  â†’ ì¡°ê±´ í™•ì¸

// í˜‘ë ¥:
Screeningì´ Movieì—ê²Œ ìš”ì²­
  â†’ Movieê°€ DiscountPolicyì—ê²Œ ìš”ì²­
    â†’ DiscountPolicyê°€ Conditionì—ê²Œ ìš”ì²­
```

### 3ï¸âƒ£ ë„ë©”ì¸ êµ¬ì¡°ë¥¼ ë”°ë¼ë¼

```
ë„ë©”ì¸ ê°œë…              â†’    í´ë˜ìŠ¤
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì˜í™” (Movie)            â†’    Movie
ìƒì˜ (Screening)        â†’    Screening
í• ì¸ ì •ì±… (Policy)      â†’    DiscountPolicy
í• ì¸ ì¡°ê±´ (Condition)   â†’    DiscountCondition
ì˜ˆë§¤ (Reservation)      â†’    Reservation
```

### 4ï¸âƒ£ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•˜ë¼

```java
// âœ… ì¢‹ì€ ì„¤ê³„
public class Movie {
    private DiscountPolicy discountPolicy;  // ì¸í„°í˜ì´ìŠ¤
}

// âŒ ë‚˜ìœ ì„¤ê³„
public class Movie {
    private AmountDiscountPolicy discountPolicy;  // êµ¬ì²´ í´ë˜ìŠ¤
}
```

### 5ï¸âƒ£ ìº¡ìŠí™”í•˜ë¼

```java
// âœ… ì¢‹ì€ ìº¡ìŠí™”
public class Screening {
    public Money getMovieFee() {
        return movie.getFee();  // Movieì—ê²Œ ìš”ì²­
    }
}

// âŒ ë‚˜ìœ ìº¡ìŠí™”
public class Screening {
    public Money getMovieFee() {
        return movie.fee;  // Movie ë‚´ë¶€ ë…¸ì¶œ
    }
}
```

---

## ğŸ¨ ë””ìì¸ íŒ¨í„´ ì •ë¦¬

### TEMPLATE METHOD íŒ¨í„´

**ì •ì˜**: ì•Œê³ ë¦¬ì¦˜ì˜ ê³¨ê²©ì„ ì •ì˜í•˜ê³ , ì¼ë¶€ ë‹¨ê³„ë¥¼ ì„œë¸Œí´ë˜ìŠ¤ë¡œ ì—°ê¸°

**ì ìš©**: `DefaultDiscountPolicy.calculateDiscountAmount()`

```java
// í…œí”Œë¦¿ ë©”ì„œë“œ
public Money calculateDiscountAmount(Screening screening) {
    // 1. ì¡°ê±´ í™•ì¸ (ê³µí†µ)
    for(DiscountCondition each : conditions) {
        if (each.isSatisfiedBy(screening)) {
            // 2. í• ì¸ ê³„ì‚° (ë³€í•˜ëŠ” ë¶€ë¶„ - ì„œë¸Œí´ë˜ìŠ¤ê°€ êµ¬í˜„)
            return getDiscountAmount(screening);
        }
    }
    // 3. í• ì¸ ì—†ìŒ (ê³µí†µ)
    return Money.ZERO;
}

// ì„œë¸Œí´ë˜ìŠ¤ê°€ êµ¬í˜„í•  ë¶€ë¶„
abstract protected Money getDiscountAmount(Screening screening);
```

### STRATEGY íŒ¨í„´

**ì •ì˜**: ì•Œê³ ë¦¬ì¦˜ êµ°ì„ ì •ì˜í•˜ê³  ìº¡ìŠí™”í•˜ì—¬ êµí™˜ ê°€ëŠ¥í•˜ê²Œ ë§Œë“¦

**ì ìš©**: `Movie`ì™€ `DiscountPolicy`

```java
// Context
public class Movie {
    private DiscountPolicy discountPolicy;  // Strategy
    
    public Money calculateMovieFee(Screening screening) {
        // Strategyì—ê²Œ ìœ„ì„
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}

// Strategy êµì²´ ê°€ëŠ¥
movie.changeDiscountPolicy(new AmountDiscountPolicy(...));
movie.changeDiscountPolicy(new PercentDiscountPolicy(...));
```

---

## ğŸ¤” ì‹¤ì „ ì ìš© ê°€ì´ë“œ

### 1ï¸âƒ£ ìƒˆë¡œìš´ í• ì¸ ì •ì±… ì¶”ê°€í•˜ê¸°

**ìš”êµ¬ì‚¬í•­**: ì²« ì˜ˆë§¤ëŠ” ë¬´ë£Œ, ì´í›„ ì •ìƒ ê°€ê²©

```java
public class FirstFreeDiscountPolicy extends DefaultDiscountPolicy {
    public FirstFreeDiscountPolicy(DiscountCondition... conditions) {
        super(conditions);
    }
    
    @Override
    protected Money getDiscountAmount(Screening screening) {
        // ì˜í™” ìš”ê¸ˆ ì „ì•¡ í• ì¸
        return screening.getMovieFee();
    }
}

// ì‚¬ìš©
Movie event = new Movie(
    "ì´ë²¤íŠ¸ ì˜í™”",
    Duration.ofMinutes(90),
    Money.wons(8000),
    new FirstFreeDiscountPolicy(
        new SequenceCondition(1)  // 1íšŒì°¨ë§Œ ë¬´ë£Œ
    )
);
```

**ë³€ê²½ëœ ì½”ë“œ**: 0ì¤„!
- Movie: ë³€ê²½ ì—†ìŒ
- Screening: ë³€ê²½ ì—†ìŒ
- ë‹¤ë¥¸ í• ì¸ ì •ì±…ë“¤: ë³€ê²½ ì—†ìŒ

### 2ï¸âƒ£ ìƒˆë¡œìš´ í• ì¸ ì¡°ê±´ ì¶”ê°€í•˜ê¸°

**ìš”êµ¬ì‚¬í•­**: ìƒì¼ì¸ ì‚¬ëŒì€ í• ì¸

```java
public class BirthdayCondition implements DiscountCondition {
    private MonthDay birthday;
    
    public BirthdayCondition(MonthDay birthday) {
        this.birthday = birthday;
    }
    
    @Override
    public boolean isSatisfiedBy(Screening screening) {
        return MonthDay.from(screening.getStartTime()).equals(birthday);
    }
}

// ì‚¬ìš©
Movie birthday = new Movie(
    "ìƒì¼ ì´ë²¤íŠ¸",
    Duration.ofMinutes(100),
    Money.wons(10000),
    new PercentDiscountPolicy(
        0.5,  // 50% í• ì¸
        new BirthdayCondition(MonthDay.of(12, 25))
    )
);
```

**ë³€ê²½ëœ ì½”ë“œ**: 0ì¤„!

### 3ï¸âƒ£ ì—¬ëŸ¬ í• ì¸ ì •ì±… ì¤‘ ìµœëŒ€ í• ì¸ ì„ íƒ

**ìš”êµ¬ì‚¬í•­**: ê¸ˆì•¡ í• ì¸ê³¼ ë¹„ìœ¨ í• ì¸ ì¤‘ í° ê²ƒ ì„ íƒ

```java
public class MaxDiscountPolicy implements DiscountPolicy {
    private List<DiscountPolicy> policies;
    
    public MaxDiscountPolicy(DiscountPolicy... policies) {
        this.policies = Arrays.asList(policies);
    }
    
    @Override
    public Money calculateDiscountAmount(Screening screening) {
        Money maxDiscount = Money.ZERO;
        
        for (DiscountPolicy policy : policies) {
            Money discount = policy.calculateDiscountAmount(screening);
            if (discount.isGreaterThan(maxDiscount)) {
                maxDiscount = discount;
            }
        }
        
        return maxDiscount;
    }
}

// ì‚¬ìš©
Movie flexible = new Movie(
    "ìœ ì—°í•œ í• ì¸",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new MaxDiscountPolicy(
        new AmountDiscountPolicy(Money.wons(1500), ...),
        new PercentDiscountPolicy(0.1, ...)
    )
);
```

---

## ğŸ’­ ìƒê°í•´ë³´ê¸°

### Q1. ì™œ MovieëŠ” í• ì¸ ì •ì±…ì„ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•ŠëŠ”ê°€?

**A**: ë‹¨ì¼ ì±…ì„ ì›ì¹™ (SRP)ê³¼ ê°œë°©-íì‡„ ì›ì¹™ (OCP)ì„ ì§€í‚¤ê¸° ìœ„í•´

```java
// âŒ Movieê°€ ì§ì ‘ êµ¬í˜„í•˜ë©´?
public class Movie {
    private DiscountType type;  // AMOUNT, PERCENT, NONE
    private Money discountAmount;
    private double percent;
    
    public Money calculateMovieFee(Screening screening) {
        Money discount = Money.ZERO;
        
        // í• ì¸ ì¡°ê±´ í™•ì¸
        boolean satisfied = false;
        for (Condition c : conditions) {
            if (c.check(screening)) {
                satisfied = true;
                break;
            }
        }
        
        if (satisfied) {
            // í• ì¸ íƒ€ì…ì— ë”°ë¼ ë¶„ê¸°
            if (type == DiscountType.AMOUNT) {
                discount = discountAmount;
            } else if (type == DiscountType.PERCENT) {
                discount = fee.times(percent);
            }
        }
        
        return fee.minus(discount);
    }
}

// ë¬¸ì œì :
// 1. Movieê°€ ì—¬ëŸ¬ ì±…ì„ì„ ê°€ì§ (ìš”ê¸ˆ ê³„ì‚° + í• ì¸ ì •ì±…)
// 2. ìƒˆ í• ì¸ ì •ì±… ì¶”ê°€ ì‹œ Movie ìˆ˜ì • í•„ìš”
// 3. ì¡°ê±´ë¬¸ì´ Movie ê³³ê³³ì— í¼ì§
```

### Q2. í• ì¸ ì¡°ê±´ì€ ì™œ ì¸í„°í˜ì´ìŠ¤ì¸ê°€?

**A**: ë‹¤ì–‘í•œ í• ì¸ ì¡°ê±´ì„ ë™ì¼í•˜ê²Œ ì·¨ê¸‰í•˜ê¸° ìœ„í•´

```java
// ìˆœë²ˆ ì¡°ê±´ê³¼ ê¸°ê°„ ì¡°ê±´ì„ ë™ì¼í•˜ê²Œ ì·¨ê¸‰
List<DiscountCondition> conditions = Arrays.asList(
    new SequenceCondition(1),
    new PeriodCondition(DayOfWeek.MONDAY, ...)
);

// ì¸í„°í˜ì´ìŠ¤ ë•ë¶„ì— ê°™ì€ ë°©ì‹ìœ¼ë¡œ í™•ì¸
for (DiscountCondition each : conditions) {
    if (each.isSatisfiedBy(screening)) {
        // ...
    }
}
```

### Q3. ìƒì†ê³¼ í•©ì„±ì„ ì–¸ì œ ì‚¬ìš©í•˜ëŠ”ê°€?

**A**:

**ìƒì†ì„ ì‚¬ìš©í•  ë•Œ**:
```java
// "is-a" ê´€ê³„ì¼ ë•Œ
AmountDiscountPolicy is a DiscountPolicy  // âœ…
PercentDiscountPolicy is a DiscountPolicy  // âœ…

// ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•  ë•Œ (ë‹¤í˜•ì„±)
DiscountPolicy policy = new AmountDiscountPolicy(...);
```

**í•©ì„±ì„ ì‚¬ìš©í•  ë•Œ**:
```java
// "has-a" ê´€ê³„ì¼ ë•Œ
Movie has a DiscountPolicy  // âœ…
Screening has a Movie       // âœ…

// ì‹¤í–‰ ì‹œì ì— ë³€ê²½ì´ í•„ìš”í•  ë•Œ
movie.changeDiscountPolicy(new PercentDiscountPolicy(...));
```

**ì¡°í•©í•´ì„œ ì‚¬ìš©**:
```java
// Movieì™€ DiscountPolicy: í•©ì„±
public class Movie {
    private DiscountPolicy discountPolicy;  // í•©ì„±
}

// DiscountPolicy ê³„ì¸µ: ìƒì†
public class AmountDiscountPolicy extends DefaultDiscountPolicy {
    // ìƒì†
}
```

---

<div align="center">

**[â¬† ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](../README.md)**

</div>
