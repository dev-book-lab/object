# Chapter 09. ìœ ì—°í•œ ì„¤ê³„

> *"ìœ ì—°í•œ ì„¤ê³„ëŠ” ë‹¨ìˆœì„±ê³¼ ëª…í™•ì„±ì˜ í¬ìƒ ìœ„ì—ì„œ ìë¼ë‚œë‹¤"*

## ğŸ“Œ í•µì‹¬ ê°œë…

ì´ ì¥ì—ì„œëŠ” **8ì¥ì˜ ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ë²•ë“¤ì„ ì›ì¹™ì´ë¼ëŠ” ê´€ì ì—ì„œ ì¬ì •ë¦¬**í•©ë‹ˆë‹¤.

### ğŸ¯ í•™ìŠµ ëª©í‘œ

- ê°œë°©-íì‡„ ì›ì¹™(OCP)ì˜ ë³¸ì§ˆ ì´í•´í•˜ê¸°
- ìƒì„±ê³¼ ì‚¬ìš©ì˜ ë¶„ë¦¬ë¥¼ í†µí•œ ìœ ì—°ì„± í™•ë³´í•˜ê¸°
- ì˜ì¡´ì„± ì£¼ì…ê³¼ SERVICE LOCATOR íŒ¨í„´ ë¹„êµí•˜ê¸°
- ì˜ì¡´ì„± ì—­ì „ ì›ì¹™(DIP)ìœ¼ë¡œ ì¬ì‚¬ìš©ì„± ë†’ì´ê¸°
- ìœ ì—°ì„±ê³¼ ë‹¨ìˆœì„± ì‚¬ì´ì˜ íŠ¸ë ˆì´ë“œì˜¤í”„ íŒë‹¨í•˜ê¸°

---

## ğŸ“– ëª©ì°¨

1. [ê°œë°©-íì‡„ ì›ì¹™](#1-ê°œë°©-íì‡„-ì›ì¹™)
2. [ìƒì„± ì‚¬ìš© ë¶„ë¦¬](#2-ìƒì„±-ì‚¬ìš©-ë¶„ë¦¬)
3. [ì˜ì¡´ì„± ì£¼ì…](#3-ì˜ì¡´ì„±-ì£¼ì…)
4. [ì˜ì¡´ì„± ì—­ì „ ì›ì¹™](#4-ì˜ì¡´ì„±-ì—­ì „-ì›ì¹™)
5. [ìœ ì—°ì„±ì— ëŒ€í•œ ì¡°ì–¸](#5-ìœ ì—°ì„±ì—-ëŒ€í•œ-ì¡°ì–¸)
6. [í•µì‹¬ ì •ë¦¬](#6-í•µì‹¬-ì •ë¦¬)

---

## 1. ê°œë°©-íì‡„ ì›ì¹™

> ğŸ“‚ **ì½”ë“œ**: [`Movie.java`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step01/Movie.java) | [`DiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step01/DiscountPolicy.java)

### 1.1 OCPì˜ ì •ì˜

#### ğŸ¯ Open-Closed Principle

```
ì†Œí”„íŠ¸ì›¨ì–´ ê°œì²´(í´ë˜ìŠ¤, ëª¨ë“ˆ, í•¨ìˆ˜ ë“±)ëŠ”
í™•ì¥ì— ëŒ€í•´ ì—´ë ¤ ìˆì–´ì•¼ í•˜ê³ ,
ìˆ˜ì •ì— ëŒ€í•´ì„œëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.
```

**ë‘ ê°€ì§€ ê´€ì :**

| ê´€ì  | ì˜ë¯¸ | ì„¤ëª… |
|------|------|------|
| **í™•ì¥ì— ì—´ë ¤ ìˆë‹¤** | ë™ì‘ì˜ ê´€ì  | ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìš”êµ¬ì‚¬í•­ì´ ë³€ê²½ë  ë•Œ ìƒˆë¡œìš´ **'ë™ì‘'**ì„ ì¶”ê°€í•´ì„œ ê¸°ëŠ¥ì„ **í™•ì¥**í•  ìˆ˜ ìˆë‹¤ |
| **ìˆ˜ì •ì— ë‹«í˜€ ìˆë‹¤** | ì½”ë“œì˜ ê´€ì  | ê¸°ì¡´ì˜ **'ì½”ë“œ'**ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ **ë™ì‘**ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ |

#### ğŸ¤” ëª¨ìˆœì²˜ëŸ¼ ë³´ì´ëŠ” ì›ì¹™

```
"ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ì–´ë–»ê²Œ ë™ì‘ì„ ì¶”ê°€í•  ìˆ˜ ìˆì„ê¹Œ?"

ì´ê²ƒì´ OCPë¥¼ ì´í•´í•˜ëŠ” í•µì‹¬ ì§ˆë¬¸ì´ë‹¤.
```

### 1.2 ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±ì„ ê³ ì •ì‹œí‚¤ê³  ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì„ ë³€ê²½í•˜ë¼

#### ğŸ’¡ OCPì˜ ë³¸ì§ˆ

```
OCPëŠ” ì‚¬ì‹¤ ëŸ°íƒ€ì„ ì˜ì¡´ì„±ê³¼ ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±ì— ê´€í•œ ì´ì•¼ê¸°ë‹¤.
```

**í•µì‹¬ ê°œë…:**

```java
// ì»´íŒŒì¼íƒ€ì„: MovieëŠ” DiscountPolicy ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´
public class Movie {
    private DiscountPolicy discountPolicy;  // ì¶”ìƒí™” ì˜ì¡´
    
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
    
    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```

```java
// ëŸ°íƒ€ì„: ë‹¤ì–‘í•œ êµ¬ì²´ í´ë˜ìŠ¤ì™€ í˜‘ë ¥
Movie avatar1 = new Movie("ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(...)  // ê¸ˆì•¡ í• ì¸
);

Movie avatar2 = new Movie("ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new PercentDiscountPolicy(...)  // ë¹„ìœ¨ í• ì¸
);

Movie avatar3 = new Movie("ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new NoneDiscountPolicy()  // í• ì¸ ì—†ìŒ
);
```

#### ğŸ“Š OCP ì‘ë™ ë°©ì‹

```
ì»´íŒŒì¼íƒ€ì„ êµ¬ì¡° (ê³ ì •)
    Movie â†’ DiscountPolicy (ì¶”ìƒí™”)
            â†‘
            |
    +-------+-------+
    |               |
AmountDiscount  PercentDiscount


ëŸ°íƒ€ì„ êµ¬ì¡° (ë³€ê²½)
    avatar1(Movie) â†’ AmountDiscountPolicy ì¸ìŠ¤í„´ìŠ¤
    avatar2(Movie) â†’ PercentDiscountPolicy ì¸ìŠ¤í„´ìŠ¤
    avatar3(Movie) â†’ NoneDiscountPolicy ì¸ìŠ¤í„´ìŠ¤


ê²°ë¡ :
ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±ì€ ìˆ˜ì •í•˜ì§€ ì•Šê³  (Movie ì½”ë“œ ë³€ê²½ ì—†ìŒ)
ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤ (ë‹¤ì–‘í•œ ì •ì±… ì ìš©)
```

#### âœ… Movie í´ë˜ìŠ¤ì˜ OCP ì¤€ìˆ˜

```java
// âœ… í™•ì¥ì— ì—´ë ¤ ìˆë‹¤
// - ìƒˆë¡œìš´ í• ì¸ ì •ì±…ì„ ì¶”ê°€í•´ì„œ ê¸°ëŠ¥ í™•ì¥ ê°€ëŠ¥
public class OverlappedDiscountPolicy extends DiscountPolicy {
    // ìƒˆë¡œìš´ ì •ì±… ì¶”ê°€
}

// âœ… ìˆ˜ì •ì— ë‹«í˜€ ìˆë‹¤
// - Movie í´ë˜ìŠ¤ ì½”ë“œëŠ” ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ
// - ìƒˆë¡œìš´ í´ë˜ìŠ¤ë§Œ ì¶”ê°€í•˜ë©´ ë¨
```

### 1.3 ì¶”ìƒí™”ê°€ í•µì‹¬ì´ë‹¤

#### ğŸ¨ ì¶”ìƒí™”ì˜ ì—­í• 

**ì¶”ìƒí™” (Abstraction):**
```
í•µì‹¬ì ì¸ ë¶€ë¶„ë§Œ ë‚¨ê¸°ê³  ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì€ ìƒëµí•¨ìœ¼ë¡œì¨
ë³µì¡ì„±ì„ ê·¹ë³µí•˜ëŠ” ê¸°ë²•
```

**OCPì™€ ì¶”ìƒí™”:**

```java
public abstract class DiscountPolicy {
    private List<DiscountCondition> conditions = new ArrayList<>();

    public DiscountPolicy(DiscountCondition... conditions) {
        this.conditions = Arrays.asList(conditions);
    }

    // âœ… ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ (ê³µí†µì )
    public Money calculateDiscountAmount(Screening screening) {
        for(DiscountCondition each : conditions) {
            if (each.isSatisfiedBy(screening)) {
                return getDiscountAmount(screening);
            }
        }
        return screening.getMovieFee();
    }

    // âœ… ë³€í•˜ëŠ” ë¶€ë¶„ (ì°¨ì´ì ) - ìƒëµë¨
    abstract protected Money getDiscountAmount(Screening screening);
}
```

#### ğŸ’ ì¶”ìƒí™”ì˜ ë‘ ê°€ì§€ ì—­í• 

**1. ìˆ˜ì •ì— ëŒ€í•´ ë‹«í˜€ ìˆë‹¤ (ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„)**

```
ê³µí†µì ì„ ë°˜ì˜í•œ ì¶”ìƒí™”ì˜ ê²°ê³¼ë¬¼ì€
ë¬¸ë§¥ì´ ë°”ë€Œë”ë¼ë„ ë³€í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.

DiscountPolicyì˜ calculateDiscountAmount ë©”ì„œë“œëŠ”
ì–´ë–¤ í• ì¸ ì •ì±…ì´ ì¶”ê°€ë˜ì–´ë„ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.
```

**2. í™•ì¥ì— ëŒ€í•´ ì—´ë ¤ ìˆë‹¤ (ìƒëµëœ ë¶€ë¶„)**

```
ì¶”ìƒí™”ë¥¼ í†µí•´ ìƒëµëœ ë¶€ë¶„ì€ í™•ì¥ì˜ ì—¬ì§€ë¥¼ ë‚¨ê¸´ë‹¤.

getDiscountAmount ë©”ì„œë“œë¥¼ êµ¬í˜„í•¨ìœ¼ë¡œì¨
ì–¸ì œë¼ë„ ìƒˆë¡œìš´ ë¬¸ë§¥ì— ë§ê²Œ ê¸°ëŠ¥ì„ í™•ì¥í•  ìˆ˜ ìˆë‹¤.
```

#### âš ï¸ ì¶”ìƒí™”ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•˜ë‹¤

```java
// âŒ ì¶”ìƒí™”í–ˆì§€ë§Œ OCPë¥¼ ë§Œì¡±í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°
public abstract class DiscountPolicy {
    public Money calculateDiscountAmount(Screening screening) {
        // í• ì¸ ì¡°ê±´ì„ ì²´í¬í•˜ëŠ” ë¡œì§
        // í•˜ì§€ë§Œ ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ìˆëŠ” ë¶€ë¶„ì„ ì œëŒ€ë¡œ ìƒëµí•˜ì§€ ëª»í•¨
    }
    
    abstract protected Money getDiscountAmount(Screening screening);
}
```

**ì¤‘ìš”í•œ ì :**

```
ì¶”ìƒí™”ê°€ ìˆ˜ì •ì— ëŒ€í•´ ë‹«í˜€ ìˆì„ ìˆ˜ ìˆëŠ” ì´ìœ ëŠ”
ë³€ê²½ë˜ì§€ ì•Šì„ ë¶€ë¶„ì„ ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•˜ê³ 
ì˜¬ë°”ë¥¸ ì¶”ìƒí™”ë¥¼ ì£¼ì˜ ê¹Šê²Œ ì„ íƒí–ˆê¸° ë•Œë¬¸ì´ë‹¤.

OCPë¥¼ ë§Œì¡±í•˜ëŠ” ì„¤ê³„ëŠ” ê³µì§œë¡œ ì–»ì–´ì§€ì§€ ì•ŠëŠ”ë‹¤.
```

### 1.4 OCP ì ìš© ì‚¬ë¡€

#### ğŸ“Š í™•ì¥ ì‹œë‚˜ë¦¬ì˜¤

```
ì‹œë‚˜ë¦¬ì˜¤ 1: í• ì¸ ì—†ëŠ” ì˜í™”
â†’ NoneDiscountPolicy ì¶”ê°€
â†’ Movie ì½”ë“œ ìˆ˜ì • ì—†ìŒ âœ…

ì‹œë‚˜ë¦¬ì˜¤ 2: ì¤‘ë³µ í• ì¸ ì •ì±…
â†’ OverlappedDiscountPolicy ì¶”ê°€
â†’ Movie ì½”ë“œ ìˆ˜ì • ì—†ìŒ âœ…

ì‹œë‚˜ë¦¬ì˜¤ 3: ì‹œê°„ëŒ€ë³„ í• ì¸ ì •ì±…
â†’ TimeDiscountPolicy ì¶”ê°€
â†’ Movie ì½”ë“œ ìˆ˜ì • ì—†ìŒ âœ…
```

#### ğŸ’¡ í•µì‹¬ íŒ¨í„´

```
1. ì¶”ìƒí™” ì‹ë³„
   - ë³€í•˜ëŠ” ê²ƒê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì„ êµ¬ë¶„
   
2. ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„ì„ ì¶”ìƒí™”ì— ì •ì˜
   - í…œí”Œë¦¿ ë©”ì„œë“œ íŒ¨í„´ í™œìš©
   
3. ë³€í•˜ëŠ” ë¶€ë¶„ì€ ì¶”ìƒ ë©”ì„œë“œë¡œ ë‚¨ê¹€
   - ì„œë¸Œí´ë˜ìŠ¤ì—ì„œ êµ¬í˜„
   
4. í´ë¼ì´ì–¸íŠ¸ëŠ” ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´
   - êµ¬ì²´ í´ë˜ìŠ¤ëŠ” ëŸ°íƒ€ì„ì— ì£¼ì…
```

---

## 2. ìƒì„± ì‚¬ìš© ë¶„ë¦¬

> ğŸ“‚ **ì½”ë“œ**: [`Client.java`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step01/client/Client.java) | [`Factory.java`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step02/factory/Factory.java)

### 2.1 ë¬¸ì œ: ìƒì„±ê³¼ ì‚¬ìš©ì˜ í˜¼ì¬

#### âŒ OCPë¥¼ ìœ„ë°˜í•˜ëŠ” ì½”ë“œ

```java
public class Movie {
    private String title;
    private Duration runningTime;
    private Money fee;
    private DiscountPolicy discountPolicy;

    public Movie(String title, Duration runningTime, Money fee) {
        this.title = title;
        this.runningTime = runningTime;
        this.fee = fee;
        // âŒ êµ¬ì²´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ìƒì„±
        this.discountPolicy = new AmountDiscountPolicy(
            Money.wons(800),
            new SequenceCondition(1),
            new SequenceCondition(10)
        );
    }

    public Money calculateMovieFee(Screening screening) {
        // ì‚¬ìš©
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```

**ë¬¸ì œì :**

```
1. OCP ìœ„ë°˜
   - ë™ì‘ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•˜ë ¤ë©´ Movie ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•¨
   - PercentDiscountPolicyë¡œ ë°”ê¾¸ë ¤ë©´? â†’ Movie ìˆ˜ì • í•„ìš”

2. ì±…ì„ì˜ í˜¼ì¬
   - ê°ì²´ ìƒì„± ì±…ì„ + ê°ì²´ ì‚¬ìš© ì±…ì„
   - ë‘ ê°€ì§€ ì´ì§ˆì ì¸ ëª©ì ì´ í•œ í´ë˜ìŠ¤ì— ê³µì¡´

3. ê²°í•©ë„ ì¦ê°€
   - Movieê°€ AmountDiscountPolicyì— ê°•í•˜ê²Œ ê²°í•©
   - ì¬ì‚¬ìš©ì„± ì €í•˜
```

### 2.2 í•´ê²°ì±…: ìƒì„± ì±…ì„ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ë™

#### âœ… ìƒì„±ê³¼ ì‚¬ìš©ì˜ ë¶„ë¦¬

```java
// âœ… Movie: ì‚¬ìš©ë§Œ ë‹´ë‹¹
public class Movie {
    private DiscountPolicy discountPolicy;

    // ìƒì„±ëœ ê°ì²´ë¥¼ ì „ë‹¬ë°›ìŒ
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.title = title;
        this.runningTime = runningTime;
        this.fee = fee;
        this.discountPolicy = discountPolicy;
    }

    // ì˜¤ì§ ì‚¬ìš©ë§Œ
    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```

```java
// âœ… Client: ìƒì„±ì„ ë‹´ë‹¹
public class Client {
    public Money getAvatarFee() {
        // ìƒì„± ì±…ì„
        Movie avatar = new Movie("ì•„ë°”íƒ€",
                Duration.ofMinutes(120),
                Money.wons(10000),
                new AmountDiscountPolicy(
                    Money.wons(800),
                    new SequenceCondition(1),
                    new SequenceCondition(10)
                ));
        
        // ì‚¬ìš©
        return avatar.getFee();
    }
}
```

#### ğŸ“Š ì±…ì„ ë¶„ë¦¬ íš¨ê³¼

```
Before:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Movie              â”‚
â”‚                             â”‚
â”‚  - ìƒì„± ì±…ì„ (new)            â”‚
â”‚  - ì‚¬ìš© ì±…ì„ (calculate)      â”‚
â”‚                             â”‚
â”‚  ê²°í•©ë„: ë†’ìŒ                  â”‚
â”‚  ì¬ì‚¬ìš©ì„±: ë‚®ìŒ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


After:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Client    â”‚          â”‚    Movie     â”‚
â”‚              â”‚          â”‚              â”‚
â”‚  - ìƒì„± ì±…ì„   â”‚ -------> â”‚  - ì‚¬ìš© ì±…ì„   â”‚
â”‚    (new)     â”‚  ì£¼ì…     â”‚  (calculate) â”‚
â”‚              â”‚          â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê²°í•©ë„: ë‚®ìŒ
ì¬ì‚¬ìš©ì„±: ë†’ìŒ
```

### 2.3 FACTORY íŒ¨í„´

#### ğŸ­ ë” ë‚˜ì€ ë¶„ë¦¬: Factory ë„ì…

**ìƒí™©:**
```
Clientë„ ìƒì„±ê³¼ ì‚¬ìš© ì±…ì„ì„ í•¨ê»˜ ê°€ì§€ê³  ìˆë‹¤.
Clientë¥¼ ì‚¬ìš©í•˜ëŠ” ìƒìœ„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ
Movie ìƒì„± ì§€ì‹ì´ ìƒˆì–´ë‚˜ê°€ëŠ” ê²ƒì„ ì›í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´?
```

**í•´ê²°ì±…:**

```java
// âœ… Factory: ì˜¤ì§ ìƒì„±ë§Œ ë‹´ë‹¹
public class Factory {
    public Movie createAvatarMovie() {
        return new Movie("ì•„ë°”íƒ€",
                Duration.ofMinutes(120),
                Money.wons(10000),
                new AmountDiscountPolicy(
                    Money.wons(800),
                    new SequenceCondition(1),
                    new SequenceCondition(10)
                ));
    }
}
```

```java
// âœ… Client: ìƒì„± ì§€ì‹ ì—†ì´ ì‚¬ìš©ë§Œ
public class Client {
    private Factory factory;

    public Client(Factory factory) {
        this.factory = factory;
    }

    public Money getAvatarFee() {
        // Factoryì—ê²Œ ìƒì„± ìœ„ì„
        Movie avatar = factory.createAvatarMovie();
        // ì‚¬ìš©ë§Œ
        return avatar.getFee();
    }
}
```

#### ğŸ“Š 3ë‹¨ê³„ ì±…ì„ ë¶„ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Factory   â”‚  â† ìƒì„± ì „ë¬¸ê°€
â”‚             â”‚
â”‚  - ìƒì„±ë§Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ìƒì„±ëœ ê°ì²´
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚  â† ì‚¬ìš© ì¡°ì •ì
â”‚             â”‚
â”‚  - ì¡°ìœ¨ë§Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ì‚¬ìš©
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Movie    â”‚  â† ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚             â”‚
â”‚  - ê³„ì‚°ë§Œ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê°ìì˜ ì±…ì„ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë¨!
```

### 2.4 ìˆœìˆ˜í•œ ê°€ê³µë¬¼ (PURE FABRICATION)

#### ğŸ­ ë„ë©”ì¸ vs ì¸ê³µë¬¼

**FACTORYëŠ” ë„ë©”ì¸ ê°œë…ì´ ì•„ë‹ˆë‹¤:**

```
ë„ë©”ì¸ ëª¨ë¸:
- ì˜í™” (Movie) âœ…
- ìƒì˜ (Screening) âœ…
- í• ì¸ ì •ì±… (DiscountPolicy) âœ…
- íŒ©í† ë¦¬ (Factory) âŒ â† ë„ë©”ì¸ì— ì¡´ì¬í•˜ì§€ ì•ŠìŒ!
```

**FACTORYëŠ” ìˆœìˆ˜í•œ ê°€ê³µë¬¼:**

```
FACTORYë¥¼ ì¶”ê°€í•œ ì´ìœ ëŠ” ìˆœìˆ˜í•˜ê²Œ ê¸°ìˆ ì ì¸ ê²°ì •ì´ë‹¤.

ë„ë©”ì¸ ê°œë…ì—ê²Œ í• ë‹¹ë˜ì–´ ìˆë˜ ê°ì²´ ìƒì„± ì±…ì„ì„
ë„ë©”ì¸ ê°œë…ê³¼ëŠ” ì•„ë¬´ ìƒê´€ì´ ì—†ëŠ”
ê°€ê³µì˜ ê°ì²´ë¡œ ì´ë™ì‹œí‚¨ ê²ƒì´ë‹¤.
```

#### ğŸ¯ ê°ì²´ ë¶„í•´ì˜ ë‘ ê°€ì§€ ë°©ì‹

**1. í‘œí˜„ì  ë¶„í•´ (Representational Decomposition)**

```
ë„ë©”ì¸ì— ì¡´ì¬í•˜ëŠ” ì‚¬ë¬¼ ë˜ëŠ” ê°œë…ì„ í‘œí˜„í•˜ëŠ” ê°ì²´ë“¤ì„
ì´ìš©í•´ ì‹œìŠ¤í…œì„ ë¶„í•´í•˜ëŠ” ê²ƒ

ì˜ˆì‹œ:
- Movie (ì˜í™”)
- Screening (ìƒì˜)
- Reservation (ì˜ˆë§¤)
- Customer (ê³ ê°)

ì¥ì : ë„ë©”ì¸ê³¼ ì†Œí”„íŠ¸ì›¨ì–´ ì‚¬ì´ì˜ í‘œí˜„ì  ì°¨ì´ ìµœì†Œí™”
ê¸°ë³¸: ê°ì²´ì§€í–¥ ì„¤ê³„ì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ì ‘ê·¼ë²•
```

**2. í–‰ìœ„ì  ë¶„í•´ (Behavioral Decomposition)**

```
ì„¤ê³„ìê°€ í¸ì˜ë¥¼ ìœ„í•´ ì„ì˜ë¡œ ë§Œë“¤ì–´ë‚¸ ê°€ê³µì˜ ê°ì²´ì—ê²Œ
ì±…ì„ì„ í• ë‹¹í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°

ì˜ˆì‹œ:
- Factory (ê°ì²´ ìƒì„±)
- Repository (ë°ì´í„° ì ‘ê·¼)
- Service (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì¡°ìœ¨)

í•„ìš”ì„±: ëª¨ë“  ì±…ì„ì„ ë„ë©”ì¸ ê°ì²´ì—ë§Œ í• ë‹¹í•˜ë©´
        ë‚®ì€ ì‘ì§‘ë„, ë†’ì€ ê²°í•©ë„ ë¬¸ì œ ë°œìƒ
```

#### ğŸ’¡ PURE FABRICATION íŒ¨í„´

**ì •ì˜:**
```
ì±…ì„ì„ í• ë‹¹í•˜ê¸° ìœ„í•´ ì°½ì¡°ë˜ëŠ”
ë„ë©”ì¸ê³¼ ë¬´ê´€í•œ ì¸ê³µì ì¸ ê°ì²´
```

**ì‚¬ìš© ì‹œì :**

```
INFORMATION EXPERT íŒ¨í„´ì— ë”°ë¼ ì±…ì„ì„ í• ë‹¹í•œ ê²°ê³¼ê°€
ë°”ëŒì§í•˜ì§€ ì•Šì„ ê²½ìš° ëŒ€ì•ˆìœ¼ë¡œ ì‚¬ìš©

ì²´í¬ë¦¬ìŠ¤íŠ¸:
â–¡ ì–´ë–¤ ê°ì²´ê°€ ì±…ì„ì„ ìˆ˜í–‰í•˜ëŠ” ë° í•„ìš”í•œ ì •ë³´ë¥¼ ê°€ì¡ŒëŠ”ê°€?
â–¡ í•˜ì§€ë§Œ ê·¸ ê°ì²´ì— ì±…ì„ì„ í• ë‹¹í•˜ë©´ ì‘ì§‘ë„ê°€ ë‚®ì•„ì§€ëŠ”ê°€?
â–¡ ê²°í•©ë„ê°€ ë†’ì•„ì§€ëŠ”ê°€?

â†’ YESë¼ë©´ PURE FABRICATION ê³ ë ¤
```

#### ğŸ¨ ì„¤ê³„ ì „ëµ

```
1. ë¨¼ì € ë„ë©”ì¸ì˜ ë³¸ì§ˆì ì¸ ê°œë…ì„ í‘œí˜„í•˜ëŠ”
   ì¶”ìƒí™”ë¥¼ ì´ìš©í•´ ì• í”Œë¦¬ì¼€ì´ì…˜ êµ¬ì¶• ì‹œì‘
   
2. ë„ë©”ì¸ ê°œë…ì´ ë§Œì¡±ìŠ¤ëŸ½ì§€ ëª»í•˜ë‹¤ë©´
   ì¸ê³µì ì¸ ê°ì²´ë¥¼ ì°½ì¡°í•˜ë¼
   
3. FACTORYëŠ” ê°ì²´ì˜ ìƒì„± ì±…ì„ì„ í• ë‹¹í•  ë§Œí•œ
   ë„ë©”ì¸ ê°ì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ì„ íƒí•˜ëŠ”
   PURE FABRICATIONì´ë‹¤
```

#### ğŸ’ ê°ì²´ì§€í–¥ì˜ ë³¸ì§ˆ

```
"ê°ì²´ì§€í–¥ì´ ì‹¤ì„¸ê³„ì˜ ëª¨ë°©ì´ë¼ëŠ” ë§ì€ ì˜³ì§€ ì•Šë‹¤"

ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜:
- ë„ë©”ì¸ ê°œë…ì„ ë°˜ì˜í•˜ëŠ” ê°ì²´ë“¤
- ì„¤ê³„ìê°€ ì„ì˜ë¡œ ì°½ì¡°í•œ ì¸ê³µì ì¸ ì¶”ìƒí™”ë“¤

â†’ í›„ìê°€ ë” ë§ì€ ë¹„ì¤‘ì„ ì°¨ì§€í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì !

ìš°ë¦¬ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ êµ¬ì¶•í•˜ëŠ” ì´ìœ ëŠ”
ì‚¬ìš©ìë“¤ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•˜ê¸° ìœ„í•´ì„œì§€
ì‹¤ì„¸ê³„ë¥¼ ëª¨ë°©í•˜ê±°ë‚˜ ì‹œë®¬ë ˆì´ì…˜í•˜ê¸° ìœ„í•œ ê²ƒì´ ì•„ë‹ˆë‹¤.
```

---

## 3. ì˜ì¡´ì„± ì£¼ì…

> ğŸ“‚ **ì½”ë“œ**: [`Movie.java (step01)`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step01/Movie.java) | [`ServiceLocator.java (step03)`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step03/locator/ServiceLocator.java)

### 3.1 ì˜ì¡´ì„± ì£¼ì…ì´ë€?

#### ğŸ¯ Dependency Injection (DI)

**ì •ì˜:**
```
ì‚¬ìš©í•˜ëŠ” ê°ì²´ê°€ ì•„ë‹Œ ì™¸ë¶€ì˜ ë…ë¦½ì ì¸ ê°ì²´ê°€
ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•œ í›„ ì´ë¥¼ ì „ë‹¬í•´ì„œ
ì˜ì¡´ì„±ì„ í•´ê²°í•˜ëŠ” ë°©ë²•
```

**í•µì‹¬ ì•„ì´ë””ì–´:**

```
ì˜ì¡´ì„±ì„ ê°ì²´ì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚´ì„œ
ì™¸ë¶€ì—ì„œ í•„ìš”í•œ ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì„ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ ë§Œë“œëŠ” ë°©ë²•
```

### 3.2 ì˜ì¡´ì„± ì£¼ì…ì˜ ì„¸ ê°€ì§€ ë°©ë²•

#### 1ï¸âƒ£ ìƒì„±ì ì£¼ì… (Constructor Injection)

```java
public class Movie {
    private DiscountPolicy discountPolicy;
    
    // âœ… ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.title = title;
        this.runningTime = runningTime;
        this.fee = fee;
        this.discountPolicy = discountPolicy;
    }
}

// ì‚¬ìš©
Movie avatar = new Movie("ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(...)  // ìƒì„± ì‹œì ì— ì£¼ì…
);
```

**ì¥ì :**
- ê°ì²´ ìƒì„± ì‹œì ì— ëª¨ë“  ì˜ì¡´ì„± í•´ê²°
- ê°ì²´ì˜ ìƒíƒœê°€ í•­ìƒ ì™„ì „í•¨ (ë¶ˆì™„ì „í•œ ìƒíƒœ ë°©ì§€)
- ë¶ˆë³€ì„± ë³´ì¥ (`final` í‚¤ì›Œë“œ ì‚¬ìš© ê°€ëŠ¥)

**ì¶”ì²œ:**
- **ê°€ì¥ ê¶Œì¥ë˜ëŠ” ë°©ì‹**
- í•„ìˆ˜ ì˜ì¡´ì„±ì— ì‚¬ìš©

#### 2ï¸âƒ£ Setter ì£¼ì… (Setter Injection)

```java
public class Movie {
    private DiscountPolicy discountPolicy;
    
    // âœ… Setterë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}

// ì‚¬ìš©
Movie avatar = new Movie("ì•„ë°”íƒ€", Duration.ofMinutes(120), Money.wons(10000));
avatar.setDiscountPolicy(new AmountDiscountPolicy(...));  // ìƒì„± í›„ ì£¼ì…

// ëŸ°íƒ€ì„ì— ë³€ê²½ ê°€ëŠ¥
avatar.setDiscountPolicy(new PercentDiscountPolicy(...));
```

**ì¥ì :**
- ì‹¤í–‰ ì‹œì ì— ì˜ì¡´ ëŒ€ìƒ ë³€ê²½ ê°€ëŠ¥
- ìœ ì—°ì„± í–¥ìƒ

**ë‹¨ì :**
- ê°ì²´ê°€ ìƒì„±ëœ í›„ setter í˜¸ì¶œ ì „ê¹Œì§€ ìƒíƒœ ë¶ˆì™„ì „
- NullPointerException ìœ„í—˜
- setter ë©”ì„œë“œ í˜¸ì¶œ ëˆ„ë½ ê°€ëŠ¥ì„±

**ì‚¬ìš© ì‹œê¸°:**
- ì„ íƒì  ì˜ì¡´ì„±
- ëŸ°íƒ€ì„ì— ì˜ì¡´ì„± ë³€ê²½ì´ í•„ìš”í•œ ê²½ìš°

#### 3ï¸âƒ£ ë©”ì„œë“œ ì£¼ì… (Method Injection)

```java
public class Movie {
    // âœ… ë©”ì„œë“œ ì¸ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…
    public Money calculateMovieFee(Screening screening, 
                                    DiscountPolicy discountPolicy) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}

// ì‚¬ìš©
Money fee = avatar.calculateMovieFee(screening, new AmountDiscountPolicy(...));
```

**ì¥ì :**
- ë©”ì„œë“œ í˜¸ì¶œë§ˆë‹¤ ë‹¤ë¥¸ ì˜ì¡´ì„± ì‚¬ìš© ê°€ëŠ¥
- ì¼ì‹œì ì¸ ì˜ì¡´ì„±ì— ì í•©

**ì‚¬ìš© ì‹œê¸°:**
- í˜‘ë ¥ ëŒ€ìƒì— ëŒ€í•´ ì§€ì†ì ì¸ ì˜ì¡´ ê´€ê³„ê°€ í•„ìš” ì—†ì„ ë•Œ
- ë©”ì„œë“œ ì‹¤í–‰ ì‹œë§ˆë‹¤ ì˜ì¡´ ëŒ€ìƒì´ ë‹¬ë¼ì ¸ì•¼ í•  ë•Œ
- í•œë‘ ê°œì˜ ë©”ì„œë“œì—ì„œë§Œ ì˜ì¡´ì„±ì´ í•„ìš”í•  ë•Œ

#### ğŸ’¡ ìµœì„ ì˜ ì¡°í•©

```java
public class Movie {
    private DiscountPolicy discountPolicy;
    
    // âœ… ìƒì„±ì: í•„ìˆ˜ ì˜ì¡´ì„±, ìƒíƒœ ì™„ì „ì„± ë³´ì¥
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
    
    // âœ… Setter: ì„ íƒì  ë³€ê²½ ê°€ëŠ¥ì„±
    public void setDiscountPolicy(DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}
```

**ì´ì :**
- ìƒì„±ìë¡œ ê¸°ë³¸ ì˜ì¡´ì„± ì„¤ì • â†’ ìƒíƒœ ì™„ì „ì„±
- Setterë¡œ ìœ ì—°ì„± ì œê³µ â†’ ëŸ°íƒ€ì„ ë³€ê²½

### 3.3 ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±ì€ ë‚˜ì˜ë‹¤

#### âŒ SERVICE LOCATOR íŒ¨í„´

```java
// âŒ ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±
public class Movie {
    private DiscountPolicy discountPolicy;

    public Movie(String title, Duration runningTime, Money fee) {
        this.title = title;
        this.runningTime = runningTime;
        this.fee = fee;
        // âŒ ë‚´ë¶€ì—ì„œ ServiceLocator ì‚¬ìš©
        this.discountPolicy = ServiceLocator.discountPolicy();
    }

    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```

```java
// SERVICE LOCATOR êµ¬í˜„
public class ServiceLocator {
    private static ServiceLocator soleInstance = new ServiceLocator();
    private DiscountPolicy discountPolicy;

    public static DiscountPolicy discountPolicy() {
        return soleInstance.discountPolicy;
    }

    public static void provide(DiscountPolicy discountPolicy) {
        soleInstance.discountPolicy = discountPolicy;
    }

    private ServiceLocator() {
    }
}
```

```java
// ì‚¬ìš©
ServiceLocator.provide(new AmountDiscountPolicy(...));
Movie avatar = new Movie("ì•„ë°”íƒ€",
                        Duration.ofMinutes(120),
                        Money.wons(10000));
```

#### ğŸš¨ SERVICE LOCATORì˜ ë¬¸ì œì 

**1. ì˜ì¡´ì„±ì„ ê°ì¶˜ë‹¤**

```java
// Movieì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ ë´ë„
// DiscountPolicyì— ì˜ì¡´í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ì—†ìŒ
public Movie(String title, Duration runningTime, Money fee) {
    // ì˜ì¡´ì„±ì´ ë‚´ë¶€ì— ìˆ¨ê²¨ì ¸ ìˆìŒ
}
```

**2. ëŸ°íƒ€ì„ì— ê°€ì„œì•¼ ë¬¸ì œ ë°œê²¬**

```java
// ServiceLocatorì— ì •ì±…ì„ ë“±ë¡í•˜ì§€ ì•Šìœ¼ë©´?
Movie avatar = new Movie("ì•„ë°”íƒ€", Duration.ofMinutes(120), Money.wons(10000));

// ì‹¤í–‰ ì‹œì ì— NullPointerException!
Money fee = avatar.calculateMovieFee(screening);  // ğŸ’¥
```

**3. ì´í•´í•˜ê¸° ì–´ë µê³  ë””ë²„ê¹…í•˜ê¸° ì–´ë ¤ì›€**

```
í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ:
1. ServiceLocatorì— ì •ì±… ë“±ë¡
2. Movie ìƒì„±
3. Movie ì‚¬ìš©

â†’ ì˜ì¡´ì„± ì„¤ì • ì‹œì ê³¼ í•´ê²° ì‹œì ì´ ë©€ë¦¬ ë–¨ì–´ì ¸ ìˆìŒ
â†’ ì½”ë“œ íë¦„ì„ ë”°ë¼ê°€ê¸° ì–´ë ¤ì›€
```

**4. ìº¡ìŠí™” ìœ„ë°˜**

```
í´ë˜ìŠ¤ì˜ ì‚¬ìš©ë²•ì„ ìµíˆê¸° ìœ„í•´
êµ¬í˜„ ë‚´ë¶€ë¥¼ ìƒ…ìƒ…ì´ ë’¤ì ¸ì•¼ í•œë‹¤ë©´
ê·¸ í´ë˜ìŠ¤ì˜ ìº¡ìŠí™”ëŠ” ë¬´ë„ˆì§„ ê²ƒì´ë‹¤.

Movieë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:
1. ServiceLocatorë¥¼ ì•Œì•„ì•¼ í•¨
2. provide ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì•¼ í•¨
3. Movie ìƒì„± ì „ì— ë“±ë¡í•´ì•¼ í•¨

â†’ ëª¨ë‘ êµ¬í˜„ ë‚´ë¶€ë¥¼ ì•Œì•„ì•¼ë§Œ ê°€ëŠ¥!
```

**5. í…ŒìŠ¤íŠ¸í•˜ê¸° ì–´ë ¤ì›€**

```java
@Test
void test1() {
    ServiceLocator.provide(new AmountDiscountPolicy(...));
    Movie movie = new Movie(...);
    // í…ŒìŠ¤íŠ¸
}

@Test
void test2() {
    // test1ì—ì„œ ì„¤ì •í•œ ì •ì±…ì´ ê·¸ëŒ€ë¡œ ë‚¨ì•„ìˆìŒ!
    // ServiceLocatorì˜ ìƒíƒœê°€ ê³µìœ ë¨
    Movie movie = new Movie(...);
    // í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨ ê°€ëŠ¥
}
```

#### âœ… ì˜ì¡´ì„± ì£¼ì…ì´ í•´ê²°í•˜ëŠ” ë°©ë²•

```java
// âœ… ëª…ì‹œì ì¸ ì˜ì¡´ì„±
public class Movie {
    private DiscountPolicy discountPolicy;
    
    // ì˜ì¡´ì„±ì´ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ë“œëŸ¬ë‚¨
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}

// ì‚¬ìš©
Movie avatar = new Movie("ì•„ë°”íƒ€",
    Duration.ofMinutes(120),
    Money.wons(10000),
    new AmountDiscountPolicy(...)  // ëª…í™•í•˜ê²Œ ì „ë‹¬
);
```

**í•´ê²°ë˜ëŠ” ë¬¸ì œë“¤:**

| ë¬¸ì œ | SERVICE LOCATOR | ì˜ì¡´ì„± ì£¼ì… |
|------|----------------|-----------|
| **ê°€ì‹œì„±** | ë‚´ë¶€ì— ìˆ¨ê¹€ | ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚¨ |
| **ì˜¤ë¥˜ ë°œê²¬** | ëŸ°íƒ€ì„ | ì»´íŒŒì¼íƒ€ì„ |
| **ì´í•´ë„** | êµ¬í˜„ ë‚´ë¶€ ë´ì•¼ í•¨ | ì‹œê·¸ë‹ˆì²˜ë§Œ ë´ë„ ì•Œ ìˆ˜ ìˆìŒ |
| **í…ŒìŠ¤íŠ¸** | ìƒíƒœ ê³µìœ  ë¬¸ì œ | ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| **ìº¡ìŠí™”** | ìœ„ë°˜ | ì¤€ìˆ˜ |

#### ğŸ’ í•µì‹¬ ì›ì¹™

```
ëª…ì‹œì ì¸ ì˜ì¡´ì„±ì´ ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±ë³´ë‹¤ ì¢‹ë‹¤.

ê°€ê¸‰ì  ì˜ì¡´ì„±ì„ ê°ì²´ì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ë…¸ì¶œí•˜ë¼.
ì˜ì¡´ì„±ì„ êµ¬í˜„ ë‚´ë¶€ì— ìˆ¨ê¸°ë©´ ìˆ¨ê¸¸ìˆ˜ë¡
ì½”ë“œë¥¼ ì´í•´í•˜ê¸°ë„, ìˆ˜ì •í•˜ê¸°ë„ ì–´ë ¤ì›Œì§„ë‹¤.

ìš”ì ì€ ëª…ì‹œì ì¸ ì˜ì¡´ì„±ì´ë‹¤.
ì´ê²ƒì´ ìœ ì—°ì„±ì„ í–¥ìƒì‹œí‚¤ëŠ” ê°€ì¥ íš¨ê³¼ì ì¸ ë°©ë²•ì´ë‹¤.
```

#### âš ï¸ SERVICE LOCATORë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°

```
1. ì˜ì¡´ì„± ì£¼ì…ì„ ì§€ì›í•˜ëŠ” í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš°
2. ê¹Šì€ í˜¸ì¶œ ê³„ì¸µì— ê±¸ì³ ë™ì¼í•œ ê°ì²´ë¥¼ ê³„ì† ì „ë‹¬í•´ì•¼ í•˜ëŠ”
   ê³ í†µì„ ê²¬ë””ê¸° ì–´ë ¤ìš´ ê²½ìš°

â†’ ì–´ì©” ìˆ˜ ì—†ì´ SERVICE LOCATOR íŒ¨í„´ ê³ ë ¤

í•˜ì§€ë§Œ ê°€ëŠ¥í•˜ë‹¤ë©´ ì˜ì¡´ì„±ì„ ëª…ì‹œì ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ”
ê¸°ë²•ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.
```

---

## 4. ì˜ì¡´ì„± ì—­ì „ ì›ì¹™

> ğŸ“‚ **ì½”ë“œ**: [`Movie.java`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step01/Movie.java) | [`DiscountPolicy.java`](https://github.com/eternity-oop/object/blob/master/chapter09/src/main/java/org/eternity/movie/step01/DiscountPolicy.java)

### 4.1 ì¶”ìƒí™”ì™€ ì˜ì¡´ì„± ì—­ì „

#### ğŸ¯ Dependency Inversion Principle (DIP)

**ì •ì˜:**
```
1. ìƒìœ„ ìˆ˜ì¤€ì˜ ëª¨ë“ˆì€ í•˜ìœ„ ìˆ˜ì¤€ì˜ ëª¨ë“ˆì— ì˜ì¡´í•´ì„œëŠ” ì•ˆ ëœë‹¤.
   ë‘˜ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•œë‹¤.

2. ì¶”ìƒí™”ëŠ” êµ¬ì²´ì ì¸ ì‚¬í•­ì— ì˜ì¡´í•´ì„œëŠ” ì•ˆ ëœë‹¤.
   êµ¬ì²´ì ì¸ ì‚¬í•­ì€ ì¶”ìƒí™”ì— ì˜ì¡´í•´ì•¼ í•œë‹¤.
```

#### ğŸ¤” "ì—­ì „"ì˜ ì˜ë¯¸

```
ì „í†µì ì¸ ì ˆì°¨í˜• í”„ë¡œê·¸ë˜ë°:
ìƒìœ„ ìˆ˜ì¤€ â†’ í•˜ìœ„ ìˆ˜ì¤€ (ì¼ë°˜ì ì¸ ì˜ì¡´ ë°©í–¥)

ì˜ì¡´ì„± ì—­ì „ ì›ì¹™:
ìƒìœ„ ìˆ˜ì¤€ â†’ ì¶”ìƒí™” â† í•˜ìœ„ ìˆ˜ì¤€ (ì˜ì¡´ ë°©í–¥ ì—­ì „!)
```

### 4.2 ìƒìœ„ ìˆ˜ì¤€ê³¼ í•˜ìœ„ ìˆ˜ì¤€

#### ğŸ“Š ê°œë… ì´í•´

**ìƒìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤:**
```
ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì¤‘ìš”í•œ ì •ì±…ì´ë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë‹´ë‹¹
ë” ì¶”ìƒì ì´ê³  ì¼ë°˜ì ì¸ ê°œë…

ì˜ˆì‹œ: Movie (ì˜í™” ì˜ˆë§¤ ì •ì±…)
```

**í•˜ìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤:**
```
ìƒìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ì„¸ë¶€ì‚¬í•­
ë” êµ¬ì²´ì ì´ê³  íŠ¹ìˆ˜í•œ ê°œë…

ì˜ˆì‹œ: AmountDiscountPolicy, PercentDiscountPolicy
```

#### âŒ ë¬¸ì œ ìƒí™©: ìƒìœ„ ìˆ˜ì¤€ì´ í•˜ìœ„ ìˆ˜ì¤€ì— ì˜ì¡´

```java
// âŒ ìƒìœ„ ìˆ˜ì¤€ì´ í•˜ìœ„ ìˆ˜ì¤€ì— ì˜ì¡´
public class Movie {
    private AmountDiscountPolicy discountPolicy;  // êµ¬ì²´ í´ë˜ìŠ¤
    
    public Movie(String title, Duration runningTime, Money fee) {
        this.discountPolicy = new AmountDiscountPolicy(...);
    }
}
```

**ë¬¸ì œì :**

```
1. ì¬ì‚¬ìš©ì„± ì €í•˜
   Movie(ìƒìœ„)ë¥¼ ì¬ì‚¬ìš©í•˜ë ¤ë©´
   AmountDiscountPolicy(í•˜ìœ„)ë„ í•„ìš”
   
2. ë³€ê²½ì— ì·¨ì•½
   AmountDiscountPolicy ë³€ê²½ ì‹œ
   Movieë„ ì˜í–¥ë°›ìŒ
   
3. í™•ì¥ ì–´ë ¤ì›€
   ìƒˆë¡œìš´ ì •ì±… ì¶”ê°€ ì‹œ
   Movie ìˆ˜ì • í•„ìš”
```

#### âœ… í•´ê²°ì±…: ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´

```java
// âœ… ìƒìœ„ ìˆ˜ì¤€ê³¼ í•˜ìœ„ ìˆ˜ì¤€ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´
public class Movie {
    private DiscountPolicy discountPolicy;  // ì¶”ìƒí™”
    
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}

public class AmountDiscountPolicy extends DiscountPolicy {
    // í•˜ìœ„ ìˆ˜ì¤€ë„ ì¶”ìƒí™”ì— ì˜ì¡´
}

public class PercentDiscountPolicy extends DiscountPolicy {
    // í•˜ìœ„ ìˆ˜ì¤€ë„ ì¶”ìƒí™”ì— ì˜ì¡´
}
```

#### ğŸ“Š ì˜ì¡´ì„± ë°©í–¥ ë¹„êµ

**Before: ì „í†µì ì¸ ì˜ì¡´ì„±**

```
[ìƒìœ„ ìˆ˜ì¤€]
   Movie â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â†“
              [í•˜ìœ„ ìˆ˜ì¤€]
       AmountDiscountPolicy

ë¬¸ì œ: Movieë¥¼ ì¬ì‚¬ìš©í•˜ë ¤ë©´ AmountDiscountPolicy í•„ìš”
```

**After: ì—­ì „ëœ ì˜ì¡´ì„±**

```
[ìƒìœ„ ìˆ˜ì¤€]
   Movie â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â†“
              [ì¶”ìƒí™”]
           DiscountPolicy
                   â†‘
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚
                          [í•˜ìœ„ ìˆ˜ì¤€]
                   AmountDiscountPolicy
                   PercentDiscountPolicy

í•´ê²°: Movieì™€ êµ¬ì²´ í´ë˜ìŠ¤ ëª¨ë‘ ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´
```

### 4.3 í˜‘ë ¥ì˜ ë³¸ì§ˆ

#### ğŸ’¡ í•µì‹¬ í†µì°°

```
ê°ì²´ ì‚¬ì´ì˜ í˜‘ë ¥ì´ ì¡´ì¬í•  ë•Œ
ê·¸ í˜‘ë ¥ì˜ ë³¸ì§ˆì„ ë‹´ê³  ìˆëŠ” ê²ƒì€ ìƒìœ„ ìˆ˜ì¤€ì˜ í´ë˜ìŠ¤ë‹¤.

Movieì™€ DiscountPolicy ì‚¬ì´ì˜ í˜‘ë ¥:
- "ì˜í™” ìš”ê¸ˆì„ ê³„ì‚°í•˜ê¸° ìœ„í•´ í• ì¸ ì •ì±…ì— ë”°ë¼ í• ì¸ ê¸ˆì•¡ì„ ê³„ì‚°í•œë‹¤"
- ì´ í˜‘ë ¥ì˜ ë³¸ì§ˆì€ Movieì— ìˆìŒ
- í• ì¸ ê¸ˆì•¡ì„ ì–´ë–»ê²Œ ê³„ì‚°í•˜ëŠ”ì§€ëŠ” ì„¸ë¶€ì‚¬í•­
```

#### ğŸ¯ ì¬ì‚¬ìš©ì˜ ëŒ€ìƒ

```
ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ìš°ë¦¬ê°€ ì¬ì‚¬ìš©í•˜ë ¤ëŠ” ëŒ€ìƒì€
ìƒìœ„ ìˆ˜ì¤€ì˜ í´ë˜ìŠ¤ì´ë‹¤.

ìƒìœ„ ìˆ˜ì¤€ì˜ í´ë˜ìŠ¤ê°€ í•˜ìœ„ ìˆ˜ì¤€ì˜ í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ë©´
ìƒìœ„ ìˆ˜ì¤€ì˜ í´ë˜ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•  ë•Œ
í•˜ìœ„ ìˆ˜ì¤€ì˜ í´ë˜ìŠ¤ë„ í•„ìš”í•˜ê¸° ë•Œë¬¸ì—
ì¬ì‚¬ìš©í•˜ê¸°ê°€ ì–´ë ¤ì›Œì§„ë‹¤.
```

### 4.4 ì˜ì¡´ì„± ì—­ì „ê³¼ íŒ¨í‚¤ì§€

#### ğŸ“¦ ì¸í„°í˜ì´ìŠ¤ ì†Œìœ ê¶Œì˜ ì—­ì „

**ì˜ëª»ëœ íŒ¨í‚¤ì§€ êµ¬ì¡°:**

```
movie
â”œâ”€â”€ Movie.java
â””â”€â”€ pricing
    â”œâ”€â”€ DiscountPolicy.java (ì¶”ìƒí™”)
    â”œâ”€â”€ AmountDiscountPolicy.java
    â””â”€â”€ PercentDiscountPolicy.java

ë¬¸ì œ:
Movieê°€ pricing íŒ¨í‚¤ì§€ì— ì˜ì¡´í•¨
pricing íŒ¨í‚¤ì§€ ë³€ê²½ ì‹œ Movie íŒ¨í‚¤ì§€ ì¬ì»´íŒŒì¼ í•„ìš”
```

**ì˜¬ë°”ë¥¸ íŒ¨í‚¤ì§€ êµ¬ì¡° (SEPARATED INTERFACE íŒ¨í„´):**

```
movie
â”œâ”€â”€ Movie.java
â”œâ”€â”€ DiscountPolicy.java (ì¶”ìƒí™”)  â† Movieì™€ í•¨ê»˜!
â””â”€â”€ pricing
    â”œâ”€â”€ AmountDiscountPolicy.java
    â””â”€â”€ PercentDiscountPolicy.java

ì¥ì :
Movieì™€ DiscountPolicyê°€ ê°™ì€ íŒ¨í‚¤ì§€
pricing íŒ¨í‚¤ì§€ê°€ movie íŒ¨í‚¤ì§€ì— ì˜ì¡´
ì˜ì¡´ì„± ë°©í–¥ì´ ì—­ì „ë¨!
```

#### ğŸ’ íŒ¨í‚¤ì§€ ì˜ì¡´ì„± ì—­ì „

**Before:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    movie     â”‚
â”‚   Movie.java â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ì˜ì¡´
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      pricing       â”‚
â”‚ DiscountPolicy     â”‚
â”‚ AmountDiscount...  â”‚
â”‚ PercentDiscount... â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

movie íŒ¨í‚¤ì§€ê°€ pricing íŒ¨í‚¤ì§€ì— ì˜ì¡´
```

**After:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        movie         â”‚
â”‚    Movie.java        â”‚
â”‚    DiscountPolicy    â”‚ â† ì¶”ìƒí™”ê°€ ì—¬ê¸°ì—!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†‘ ì˜ì¡´
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       pricing        â”‚
â”‚ AmountDiscount...    â”‚
â”‚ PercentDiscount...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

pricing íŒ¨í‚¤ì§€ê°€ movie íŒ¨í‚¤ì§€ì— ì˜ì¡´
ì˜ì¡´ì„± ì—­ì „!
```

#### ğŸ¯ í•µì‹¬ ì›ì¹™

```
ì¶”ìƒí™”ë¥¼ ë³„ë„ì˜ ë…ë¦½ì ì¸ íŒ¨í‚¤ì§€ê°€ ì•„ë‹ˆë¼
í´ë¼ì´ì–¸íŠ¸ê°€ ì†í•œ íŒ¨í‚¤ì§€ì— í¬í•¨ì‹œì¼œì•¼ í•œë‹¤.

í•¨ê»˜ ì¬ì‚¬ìš©ë  í•„ìš”ê°€ ì—†ëŠ” í´ë˜ìŠ¤ë“¤ì€
ë³„ë„ì˜ ë…ë¦½ì ì¸ íŒ¨í‚¤ì§€ì— ëª¨ì•„ì•¼ í•œë‹¤.

ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ì— ë”°ë¼ ìƒìœ„ ìˆ˜ì¤€ì˜ í˜‘ë ¥ íë¦„ì„ ì¬ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ”
ì¶”ìƒí™”ê°€ ì œê³µí•˜ëŠ” ì¸í„°í˜ì´ìŠ¤ì˜ ì†Œìœ ê¶Œ ì—­ì‹œ ì—­ì „ì‹œì¼œì•¼ í•œë‹¤.
```

### 4.5 DIPì˜ íš¨ê³¼

#### âœ… ë‹¬ì„±ë˜ëŠ” ê²ƒë“¤

**1. ì¬ì‚¬ìš©ì„± í–¥ìƒ**

```java
// Movieë¥¼ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì¬ì‚¬ìš©
// DiscountPolicyë„ í•¨ê»˜ ê°€ì ¸ê°€ë©´ ë¨
// êµ¬ì²´ í´ë˜ìŠ¤ë“¤ì€ í•„ìš”í•œ ê²ƒë§Œ êµ¬í˜„
```

**2. ë³€ê²½ì— ìœ ì—°í•¨**

```java
// ìƒˆë¡œìš´ ì •ì±… ì¶”ê°€
public class SeasonDiscountPolicy extends DiscountPolicy {
    // Movie ìˆ˜ì • ì—†ì´ ì¶”ê°€
}
```

**3. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**

```java
@Test
void testMovieFee() {
    // Mock ê°ì²´ë¡œ ì‰½ê²Œ í…ŒìŠ¤íŠ¸
    DiscountPolicy mock = mock(DiscountPolicy.class);
    Movie movie = new Movie("Test", Duration.ofMinutes(120), 
                           Money.wons(10000), mock);
}
```

---

## 5. ìœ ì—°ì„±ì— ëŒ€í•œ ì¡°ì–¸

### 5.1 ìœ ì—°í•œ ì„¤ê³„ëŠ” ìœ ì—°ì„±ì´ í•„ìš”í•  ë•Œë§Œ ì˜³ë‹¤

#### âš–ï¸ ë‹¨ìˆœí•¨ vs ìœ ì—°í•¨

**ìœ ì—°í•œ ì„¤ê³„ì˜ ëŒ€ê°€:**

```
ë‹¨ìˆœí•¨ê³¼ ëª…í™•í•¨ì„ í¬ìƒí•œë‹¤.

ìœ ì—°í•œ ì„¤ê³„ = ë³µì¡í•œ ì„¤ê³„
```

#### ğŸ’¡ ë³µì¡ì„±ì˜ ì›ì¸

**1. í´ë˜ìŠ¤ êµ¬ì¡°ì™€ ê°ì²´ êµ¬ì¡°ì˜ ê´´ë¦¬**

```java
// í´ë˜ìŠ¤ êµ¬ì¡° (ì½”ë“œì— ë³´ì´ëŠ” ê²ƒ)
public class Movie {
    private DiscountPolicy discountPolicy;  // ì¶”ìƒí™”
}

// ê°ì²´ êµ¬ì¡° (ì‹¤í–‰ ì‹œ ì‹¤ì œ ëª¨ìŠµ)
Movie avatar1 â†’ AmountDiscountPolicy ì¸ìŠ¤í„´ìŠ¤
Movie avatar2 â†’ PercentDiscountPolicy ì¸ìŠ¤í„´ìŠ¤
Movie avatar3 â†’ OverlappedDiscountPolicy ì¸ìŠ¤í„´ìŠ¤

â†’ ì½”ë“œë§Œ ë´ì„œëŠ” ì‹¤í–‰ êµ¬ì¡°ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ!
```

**2. ê°„ì ‘ ì°¸ì¡°ì˜ ë³µì¡ì„±**

```java
// ë‹¨ìˆœí•œ ì„¤ê³„
public class Movie {
    private AmountDiscountPolicy policy;  // ì§ì ‘ ì°¸ì¡°
    // ëˆ„ê°€ ë´ë„ ëª…í™•í•¨
}

// ìœ ì—°í•œ ì„¤ê³„
public class Movie {
    private DiscountPolicy policy;  // ê°„ì ‘ ì°¸ì¡°
    // ì‹¤ì œ íƒ€ì…ì€? ì‹¤í–‰ ì‹œì ì— ê²°ì •ë¨
    // í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë´ì•¼ ì•Œ ìˆ˜ ìˆìŒ
}
```

#### ğŸ¯ ìœ ì—°ì„±ì˜ íŒë‹¨ ê¸°ì¤€

**ì–¸ì œ ìœ ì—°í•œ ì„¤ê³„ë¥¼ ì„ íƒí•  ê²ƒì¸ê°€?**

```
âœ… ìœ ì—°ì„±ì´ í•„ìš”í•œ ê²½ìš°:
   - ìš”êµ¬ì‚¬í•­ì´ ìì£¼ ë³€ê²½ë¨
   - ë‹¤ì–‘í•œ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¬ì‚¬ìš© í•„ìš”
   - í™•ì¥ì´ ì˜ˆìƒë¨

âŒ ìœ ì—°ì„±ì´ ë¶ˆí•„ìš”í•œ ê²½ìš°:
   - ìš”êµ¬ì‚¬í•­ì´ ì•ˆì •ì ì„
   - íŠ¹ì • ì»¨í…ìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©
   - ë‹¨ìˆœì„±ì´ ë” ì¤‘ìš”í•¨
```

#### ğŸ’ ì„¤ê³„ ì›ì¹™

```
ë³€ê²½ì€ ì˜ˆìƒì´ ì•„ë‹ˆë¼ í˜„ì‹¤ì´ì–´ì•¼ í•œë‹¤.

ë¯¸ë˜ì— ë³€ê²½ì´ ì¼ì–´ë‚ ì§€ë„ ëª¨ë¥¸ë‹¤ëŠ” ë§‰ì—°í•œ ë¶ˆì•ˆê°ì€
ë¶ˆí•„ìš”í•˜ê²Œ ë³µì¡í•œ ì„¤ê³„ë¥¼ ë‚³ëŠ”ë‹¤.

ì•„ì§ ì¼ì–´ë‚˜ì§€ ì•Šì€ ë³€ê²½ì€ ë³€ê²½ì´ ì•„ë‹ˆë‹¤.
```

### 5.2 íŠ¸ë ˆì´ë“œì˜¤í”„

#### âš–ï¸ ê· í˜• ì¡ê¸°

**ë‹¨ìˆœí•˜ê³  ëª…í™•í•œ ì„¤ê³„:**

```java
// âœ… ì½ê¸° ì‰½ê³  ì´í•´í•˜ê¸° ì‰¬ì›€
public class Movie {
    private AmountDiscountPolicy discountPolicy;
    
    public Movie(String title, Duration runningTime, Money fee) {
        this.discountPolicy = new AmountDiscountPolicy(
            Money.wons(800),
            new SequenceCondition(1)
        );
    }
}

ì¥ì :
- ì½”ë“œë¥¼ ë³´ëŠ” ê²ƒë§Œìœ¼ë¡œ ë™ì‘ íŒŒì•… ê°€ëŠ¥
- ë””ë²„ê¹… ì‰¬ì›€
- í•™ìŠµ ê³¡ì„  ë‚®ìŒ

ë‹¨ì :
- í™•ì¥ ì–´ë ¤ì›€
- ì¬ì‚¬ìš©ì„± ë‚®ìŒ
```

**ìœ ì—°í•˜ê³  ë³µì¡í•œ ì„¤ê³„:**

```java
// âœ… í™•ì¥ ê°€ëŠ¥í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥
public class Movie {
    private DiscountPolicy discountPolicy;
    
    public Movie(String title, Duration runningTime, Money fee,
                 DiscountPolicy discountPolicy) {
        this.discountPolicy = discountPolicy;
    }
}

ì¥ì :
- í™•ì¥ ì‰¬ì›€
- ì¬ì‚¬ìš©ì„± ë†’ìŒ
- í…ŒìŠ¤íŠ¸ ìš©ì´

ë‹¨ì :
- ì‹¤í–‰ êµ¬ì¡°ë¥¼ íŒŒì•…í•˜ê¸° ì–´ë ¤ì›€
- í´ë¼ì´ì–¸íŠ¸ ì½”ë“œë¥¼ ë´ì•¼ ì´í•´ ê°€ëŠ¥
- í•™ìŠµ ê³¡ì„  ë†’ìŒ
```

#### ğŸ’¡ ì˜ì‚¬ê²°ì • ê°€ì´ë“œ

```
ë‹¨ìˆœí•œ ì„¤ê³„ë¥¼ ì„ íƒí•˜ëŠ” ê²½ìš°:
â–¡ ê·¸ëŸ°ëŒ€ë¡œ ë§Œì¡±ìŠ¤ëŸ¬ìš´ í•´ë²•ì´ ì¡´ì¬í•˜ëŠ”ê°€?
â–¡ ìš”êµ¬ì‚¬í•­ì´ ì•ˆì •ì ì¸ê°€?
â–¡ íŒ€ì›ë“¤ì´ ë³µì¡ì„±ì„ ìˆ˜ìš©í•˜ê¸° ì–´ë ¤ìš´ê°€?

ìœ ì—°í•œ ì„¤ê³„ë¥¼ ì„ íƒí•˜ëŠ” ê²½ìš°:
â–¡ ë³€ê²½ì´ ì˜ˆìƒë˜ëŠ”ê°€?
â–¡ ì¬ì‚¬ìš©ì´ í•„ìš”í•œê°€?
â–¡ ë³µì¡ì„±ì„ ê°ë‹¹í•  ìˆ˜ ìˆëŠ”ê°€?
â–¡ ìœ ì—°ì„±ì˜ í•„ìš”ì„±ì´ ë³µì¡ì„± ê±±ì •ë³´ë‹¤ í°ê°€?
```

### 5.3 í˜‘ë ¥ê³¼ ì±…ì„ì´ ì¤‘ìš”í•˜ë‹¤

#### ğŸ¯ ì„¤ê³„ì˜ ìš°ì„ ìˆœìœ„

```
1ìˆœìœ„: ì—­í• , ì±…ì„, í˜‘ë ¥
2ìˆœìœ„: ì˜ì¡´ì„± ê´€ë¦¬
3ìˆœìœ„: ê°ì²´ ìƒì„± ë©”ì»¤ë‹ˆì¦˜

ìˆœì„œë¥¼ ë°”ê¾¸ë©´ ì•ˆ ëœë‹¤!
```

#### âŒ ì´ˆë³´ìì˜ ì‹¤ìˆ˜

**ë„ˆë¬´ ì„±ê¸‰í•œ ê°ì²´ ìƒì„± ê³ ë¯¼:**

```java
// âŒ ì±…ì„ í• ë‹¹ ì „ì— ìƒì„±ë¶€í„° ê³ ë¯¼
public class MovieFactory {
    public Movie create() {
        return new Movie(...);
    }
}

// ë¬¸ì œ: Movieì˜ ì±…ì„ì´ ëª…í™•í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ
//      ìƒì„± ë©”ì»¤ë‹ˆì¦˜ë¶€í„° ê²°ì •í•˜ë©´
//      ë¶ˆí•„ìš”í•œ ë³µì¡ì„± ì¦ê°€
```

#### âœ… ì˜¬ë°”ë¥¸ ì„¤ê³„ ìˆœì„œ

**Step 1: í˜‘ë ¥ê³¼ ì±…ì„ ì„¤ê³„**

```java
// ë¨¼ì € í˜‘ë ¥ì„ ì„¤ê³„í•˜ê³  ì±…ì„ì„ í• ë‹¹
public class Movie {
    public Money calculateMovieFee(Screening screening) {
        // ì–´ë–¤ ì±…ì„ì„ ê°€ì§ˆ ê²ƒì¸ê°€?
        // ì–´ë–¤ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ì„ ê²ƒì¸ê°€?
    }
}
```

**Step 2: ì˜ì¡´ì„± ê´€ë¦¬**

```java
// ì±…ì„ì´ ëª…í™•í•´ì§„ í›„ ì˜ì¡´ì„± ê´€ë¦¬
public class Movie {
    private DiscountPolicy discountPolicy;  // ì¶”ìƒí™” ì˜ì¡´
    
    public Money calculateMovieFee(Screening screening) {
        return fee.minus(discountPolicy.calculateDiscountAmount(screening));
    }
}
```

**Step 3: ê°ì²´ ìƒì„±**

```java
// ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒì„± ì±…ì„ í• ë‹¹
public class Factory {
    public Movie createMovie() {
        return new Movie(..., new AmountDiscountPolicy(...));
    }
}
```

#### ğŸ’ í•µì‹¬ ì›ì¹™

```
"ê°ì²´ê°€ ë¬´ì—‡ì´ ë˜ê³  ì‹¶ì„ì§€ë¥¼ ì•Œê²Œ ë  ë•Œê¹Œì§€
 ê°ì²´ë“¤ì„ ì–´ë–»ê²Œ ì¸ìŠ¤í„´ìŠ¤í™”í•  ê²ƒì¸ì§€ì— ëŒ€í•´
 ì „í˜€ ì‹ ê²½ì“°ì§€ ì•ŠëŠ”ë‹¤.
 
 ë§ˆì¹˜ ê°ì²´ê°€ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼
 ì´ë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ì‹ ê²½ ì“°ëŠ” ì¼ì´ë‹¤."
```

#### ğŸ¯ ì„¤ê³„ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ ì—­í• ì´ ëª…í™•í•œê°€?
â–¡ ì±…ì„ì´ ì ì ˆíˆ ë¶„ë°°ë˜ì—ˆëŠ”ê°€?
â–¡ í˜‘ë ¥ì´ ìì—°ìŠ¤ëŸ¬ìš´ê°€?
   â†“
â–¡ ì˜ì¡´ì„±ì´ ì¶”ìƒí™”ë¥¼ í–¥í•˜ëŠ”ê°€?
â–¡ ê²°í•©ë„ê°€ ë‚®ì€ê°€?
   â†“
â–¡ ê°ì²´ ìƒì„± ì±…ì„ì´ ì ì ˆíˆ ë¶„ë¦¬ë˜ì—ˆëŠ”ê°€?
â–¡ FACTORYê°€ í•„ìš”í•œê°€?
```

#### âš ï¸ ì¤‘ìš”í•œ ê²½ê³ 

```
ì—­í• , ì±…ì„, í˜‘ë ¥ì˜ ëª¨ìŠµì´ ì„ ëª…í•˜ê²Œ ê·¸ë ¤ì§€ì§€ ì•ŠëŠ”ë‹¤ë©´
ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ëŠ” ë° ë“¤ì´ëŠ” ëª¨ë“  ë…¸ë ¥ì´
ë¬¼ê±°í’ˆì´ ë  ìˆ˜ë„ ìˆë‹¤.

í•µì‹¬ì€ í˜‘ë ¥ê³¼ ì±…ì„ì´ë‹¤.
ì˜ì¡´ì„± ê´€ë¦¬ëŠ” ê·¸ ë‹¤ìŒì´ë‹¤.
```

---

## 6. í•µì‹¬ ì •ë¦¬

### ğŸ¯ 5ê°€ì§€ ì›ì¹™ê³¼ ê¸°ë²•

#### 1. ê°œë°©-íì‡„ ì›ì¹™ (OCP)

```
í™•ì¥ì—ëŠ” ì—´ë ¤ ìˆê³ , ìˆ˜ì •ì—ëŠ” ë‹«í˜€ ìˆì–´ì•¼ í•œë‹¤.

í•µì‹¬:
- ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±ì€ ê³ ì •
- ëŸ°íƒ€ì„ ì˜ì¡´ì„±ì€ ë³€ê²½
- ì¶”ìƒí™”ê°€ í•µì‹¬

ì ìš©:
â†’ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ
```

#### 2. ìƒì„± ì‚¬ìš© ë¶„ë¦¬

```
ê°ì²´ ìƒì„± ì±…ì„ê³¼ ì‚¬ìš© ì±…ì„ì„ ë¶„ë¦¬í•˜ë¼.

ë°©ë²•:
- ìƒì„± ì±…ì„ì„ í´ë¼ì´ì–¸íŠ¸ë¡œ
- FACTORY íŒ¨í„´ í™œìš©
- PURE FABRICATION ê³ ë ¤

íš¨ê³¼:
â†’ ë‚®ì€ ê²°í•©ë„, ë†’ì€ ì‘ì§‘ë„
```

#### 3. ì˜ì¡´ì„± ì£¼ì… (DI)

```
ì™¸ë¶€ì—ì„œ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ë¼.

ë°©ë²•:
- ìƒì„±ì ì£¼ì… (ê¶Œì¥)
- Setter ì£¼ì… (ì„ íƒì )
- ë©”ì„œë“œ ì£¼ì… (ì¼ì‹œì )

í”¼í•  ê²ƒ:
â†’ SERVICE LOCATOR (ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±)
```

#### 4. ì˜ì¡´ì„± ì—­ì „ ì›ì¹™ (DIP)

```
ìƒìœ„ ìˆ˜ì¤€ê³¼ í•˜ìœ„ ìˆ˜ì¤€ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ë¼.

í•µì‹¬:
- ì¶”ìƒí™”ë¥¼ ìƒìœ„ ìˆ˜ì¤€ íŒ¨í‚¤ì§€ì—
- ì¸í„°í˜ì´ìŠ¤ ì†Œìœ ê¶Œ ì—­ì „
- SEPARATED INTERFACE íŒ¨í„´

íš¨ê³¼:
â†’ ìƒìœ„ ìˆ˜ì¤€ ì¬ì‚¬ìš© ê°€ëŠ¥
```

#### 5. ìœ ì—°ì„±ê³¼ ë‹¨ìˆœì„±ì˜ ê· í˜•

```
ìœ ì—°ì„±ì€ í•„ìš”í•  ë•Œë§Œ ì¶”êµ¬í•˜ë¼.

íŒë‹¨ ê¸°ì¤€:
- ë³€ê²½ì´ í˜„ì‹¤ì¸ê°€?
- ë³µì¡ì„±ì„ ìˆ˜ìš©í•  ìˆ˜ ìˆëŠ”ê°€?
- í˜‘ë ¥ê³¼ ì±…ì„ì´ ëª…í™•í•œê°€?

ìš°ì„ ìˆœìœ„:
â†’ í˜‘ë ¥ > ì±…ì„ > ì˜ì¡´ì„± > ìƒì„±
```

### ğŸ“Š ì›ì¹™ë“¤ì˜ ê´€ê³„

```
               OCP (ê°œë°©-íì‡„ ì›ì¹™)
                      â†“
                  ì¶”ìƒí™”ê°€ í•µì‹¬
                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                           â†“
   ìƒì„± ì‚¬ìš© ë¶„ë¦¬                DIP (ì˜ì¡´ì„± ì—­ì „)
        â†“                           â†“
   FACTORY íŒ¨í„´                  ì¶”ìƒí™” ì¬ì‚¬ìš©
        â†“                           â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â†“
                 ì˜ì¡´ì„± ì£¼ì… (DI)
                      â†“
                  ëª…ì‹œì  ì˜ì¡´ì„±
                      â†“
            ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ì„¤ê³„
```

### ğŸ’¡ ì‹¤ì²œ ê°€ì´ë“œ

#### ì„¤ê³„ ì‹œì‘ ë‹¨ê³„

```
1. í˜‘ë ¥ ì„¤ê³„
   "ê°ì²´ë“¤ì´ ì–´ë–»ê²Œ í˜‘ë ¥í•  ê²ƒì¸ê°€?"
   
2. ì±…ì„ í• ë‹¹
   "ëˆ„ê°€ ë¬´ì—‡ì„ ì•Œê³  ìˆê³ , ë¬´ì—‡ì„ í•  ê²ƒì¸ê°€?"
   
3. ì—­í•  ì¶”ì¶œ
   "ëŒ€ì²´ ê°€ëŠ¥í•œ ê°ì²´ë“¤ì„ ì—­í• ë¡œ ë¬¶ì„ ìˆ˜ ìˆëŠ”ê°€?"
```

#### ì˜ì¡´ì„± ê´€ë¦¬ ë‹¨ê³„

```
4. ì¶”ìƒí™” ë„ì¶œ
   "ë³€í•˜ëŠ” ê²ƒê³¼ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì„ êµ¬ë¶„í–ˆëŠ”ê°€?"
   
5. ì˜ì¡´ì„± ë°©í–¥
   "ëª¨ë‘ ì¶”ìƒí™”ë¥¼ í–¥í•˜ëŠ”ê°€?"
   
6. ì˜ì¡´ì„± ì£¼ì…
   "ì˜ì¡´ì„±ì´ ëª…ì‹œì ì¸ê°€?"
```

#### ìƒì„± ê´€ë¦¬ ë‹¨ê³„

```
7. ìƒì„± ì±…ì„ ë¶„ë¦¬
   "ìƒì„±ê³¼ ì‚¬ìš©ì´ ë¶„ë¦¬ë˜ì—ˆëŠ”ê°€?"
   
8. FACTORY ê³ ë ¤
   "PURE FABRICATIONì´ í•„ìš”í•œê°€?"
```

### ğŸ“ ì„¤ê³„ í’ˆì§ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ê°€? (OCP)
â–¡ ìƒì„± ì±…ì„ê³¼ ì‚¬ìš© ì±…ì„ì´ ë¶„ë¦¬ë˜ì—ˆëŠ”ê°€? (ìƒì„± ì‚¬ìš© ë¶„ë¦¬)
â–¡ ì˜ì¡´ì„±ì´ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚˜ëŠ”ê°€? (DI)
â–¡ ìƒìœ„ ìˆ˜ì¤€ê³¼ í•˜ìœ„ ìˆ˜ì¤€ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´í•˜ëŠ”ê°€? (DIP)
â–¡ ì¶”ìƒí™”ê°€ í´ë¼ì´ì–¸íŠ¸ íŒ¨í‚¤ì§€ì— ìœ„ì¹˜í•˜ëŠ”ê°€? (SEPARATED INTERFACE)
â–¡ ìœ ì—°ì„±ì´ ì •ë§ í•„ìš”í•œê°€? (íŠ¸ë ˆì´ë“œì˜¤í”„)
â–¡ í˜‘ë ¥ê³¼ ì±…ì„ì´ ëª…í™•í•œê°€? (ìš°ì„ ìˆœìœ„)
â–¡ FACTORYê°€ ì ì ˆíˆ ì‚¬ìš©ë˜ì—ˆëŠ”ê°€? (PURE FABRICATION)
```

### ğŸ† ì¢‹ì€ ì„¤ê³„ì˜ ì§€í‘œ

```
1. í™•ì¥ ê°€ëŠ¥ì„±
   - ìƒˆë¡œìš´ í´ë˜ìŠ¤ ì¶”ê°€ë§Œìœ¼ë¡œ ê¸°ëŠ¥ í™•ì¥
   
2. ì¬ì‚¬ìš©ì„±
   - ìƒìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤ë¥¼ ë‹¤ì–‘í•œ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¬ì‚¬ìš©
   
3. í…ŒìŠ¤íŠ¸ ìš©ì´ì„±
   - Mock ê°ì²´ë¡œ ì‰½ê²Œ í…ŒìŠ¤íŠ¸
   
4. ì´í•´ ê°€ëŠ¥ì„±
   - í˜‘ë ¥ê³¼ ì±…ì„ì´ ëª…í™•
   
5. ìœ ì§€ë³´ìˆ˜ì„±
   - ë³€ê²½ì˜ ì˜í–¥ì´ ì œí•œì 
```

### ğŸ’ ë§ˆì§€ë§‰ ì¡°ì–¸

```
ì„¤ê³„ì˜ í•µì‹¬ì€ ì˜ì¡´ì„± ê´€ë¦¬ë‹¤.

í•˜ì§€ë§Œ ì˜ì¡´ì„± ê´€ë¦¬ì˜ ëª©ì ì€
ì—­í• , ì±…ì„, í˜‘ë ¥ì˜ ê´€ì ì—ì„œ
ì„¤ê³„ê°€ ìœ ì—°í•˜ê³  ì¬ì‚¬ìš© ê°€ëŠ¥í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ë”°ë¼ì„œ:
1. ë¨¼ì € ì—­í• , ì±…ì„, í˜‘ë ¥ì— ì§‘ì¤‘í•˜ë¼
2. ê·¸ ë‹¤ìŒ ì˜ì¡´ì„±ì„ ê´€ë¦¬í•˜ë¼
3. ë§ˆì§€ë§‰ì— ê°ì²´ ìƒì„±ì„ ê³ ë¯¼í•˜ë¼

ìˆœì„œë¥¼ ë°”ê¾¸ì§€ ë§ˆë¼.
```

---

## 7. ì‹¤ì „ ì˜ˆì œ

### ì˜ˆì œ 1: ì•Œë¦¼ ì‹œìŠ¤í…œ - OCP ì ìš©

#### âŒ Before: OCP ìœ„ë°˜

```java
public class NotificationService {
    public void send(String message, String type) {
        // âŒ íƒ€ì…ì— ë”°ë¼ ë¶„ê¸° ì²˜ë¦¬
        if (type.equals("EMAIL")) {
            // ì´ë©”ì¼ ì „ì†¡ ë¡œì§
            EmailSender emailSender = new EmailSender();
            emailSender.sendEmail(message);
        } else if (type.equals("SMS")) {
            // SMS ì „ì†¡ ë¡œì§
            SmsSender smsSender = new SmsSender();
            smsSender.sendSms(message);
        } else if (type.equals("PUSH")) {
            // í‘¸ì‹œ ì•Œë¦¼ ë¡œì§
            PushSender pushSender = new PushSender();
            pushSender.sendPush(message);
        }
    }
}
```

**ë¬¸ì œì :**
```
1. ìƒˆë¡œìš´ ì•Œë¦¼ íƒ€ì… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • í•„ìš”
   - Slack ì•Œë¦¼ ì¶”ê°€í•˜ë ¤ë©´? â†’ if-else ì¶”ê°€
   
2. ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„± = ëŸ°íƒ€ì„ ì˜ì¡´ì„±
   - NotificationServiceê°€ ëª¨ë“  êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´
   
3. OCP ìœ„ë°˜
   - í™•ì¥ì„ ìœ„í•´ ìˆ˜ì •ì´ í•„ìš”í•¨
```

#### âœ… After: OCP ì¤€ìˆ˜

```java
// âœ… ì¶”ìƒí™”
public interface MessageSender {
    void send(String message);
}

// âœ… êµ¬ì²´ í´ë˜ìŠ¤ë“¤
public class EmailSender implements MessageSender {
    @Override
    public void send(String message) {
        // ì´ë©”ì¼ ì „ì†¡
    }
}

public class SmsSender implements MessageSender {
    @Override
    public void send(String message) {
        // SMS ì „ì†¡
    }
}

public class PushSender implements MessageSender {
    @Override
    public void send(String message) {
        // í‘¸ì‹œ ì•Œë¦¼
    }
}

// âœ… í™•ì¥: ìƒˆë¡œìš´ íƒ€ì… ì¶”ê°€ ì‹œ ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ì—†ìŒ
public class SlackSender implements MessageSender {
    @Override
    public void send(String message) {
        // Slack ì „ì†¡
    }
}

// âœ… ì„œë¹„ìŠ¤ëŠ” ì¶”ìƒí™”ì—ë§Œ ì˜ì¡´
public class NotificationService {
    private MessageSender sender;
    
    public NotificationService(MessageSender sender) {
        this.sender = sender;
    }
    
    public void send(String message) {
        sender.send(message);
    }
}
```

**ê°œì„  íš¨ê³¼:**

| ì¸¡ë©´ | Before | After |
|------|--------|-------|
| **í™•ì¥ì„±** | if-else ì¶”ê°€ í•„ìš” | ìƒˆë¡œìš´ í´ë˜ìŠ¤ë§Œ ì¶”ê°€ |
| **ì»´íŒŒì¼íƒ€ì„ ì˜ì¡´ì„±** | ëª¨ë“  êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´ | MessageSenderì—ë§Œ ì˜ì¡´ |
| **ëŸ°íƒ€ì„ ì˜ì¡´ì„±** | ê³ ì •ë¨ | ìœ ì—°í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥ |
| **í…ŒìŠ¤íŠ¸** | ëª¨ë“  Sender í•„ìš” | Mock ê°ì²´ë¡œ ì‰½ê²Œ í…ŒìŠ¤íŠ¸ |

---

### ì˜ˆì œ 2: ë¡œê¹… ì‹œìŠ¤í…œ - ìƒì„± ì‚¬ìš© ë¶„ë¦¬

#### âŒ Before: ìƒì„±ê³¼ ì‚¬ìš©ì´ í˜¼ì¬

```java
public class OrderProcessor {
    private Logger logger;
    
    public void processOrder(Order order) {
        // âŒ ì‚¬ìš©í•˜ëŠ” ê³³ì—ì„œ ìƒì„±
        this.logger = new FileLogger("/logs/order.log");
        
        logger.log("Processing order: " + order.getId());
        
        // ì£¼ë¬¸ ì²˜ë¦¬ ë¡œì§
        order.process();
        
        logger.log("Order processed: " + order.getId());
    }
}
```

**ë¬¸ì œì :**
```
1. OrderProcessorê°€ FileLoggerì— ê°•í•˜ê²Œ ê²°í•©
2. ë¡œê¹… ë°©ì‹ ë³€ê²½ ì‹œ OrderProcessor ìˆ˜ì • í•„ìš”
3. í…ŒìŠ¤íŠ¸ ì‹œ ì‹¤ì œ íŒŒì¼ ì‹œìŠ¤í…œ í•„ìš”
4. ìƒì„±ê³¼ ì‚¬ìš© ì±…ì„ì´ í˜¼ì¬
```

#### âœ… After: FACTORY íŒ¨í„´ìœ¼ë¡œ ë¶„ë¦¬

```java
// âœ… ì¶”ìƒí™”
public interface Logger {
    void log(String message);
}

public class FileLogger implements Logger {
    private String filePath;
    
    public FileLogger(String filePath) {
        this.filePath = filePath;
    }
    
    @Override
    public void log(String message) {
        // íŒŒì¼ì— ë¡œê·¸ ê¸°ë¡
    }
}

public class ConsoleLogger implements Logger {
    @Override
    public void log(String message) {
        System.out.println(message);
    }
}

public class CloudLogger implements Logger {
    @Override
    public void log(String message) {
        // í´ë¼ìš°ë“œì— ë¡œê·¸ ì „ì†¡
    }
}

// âœ… FACTORY: ìƒì„± ì±…ì„ ì „ë‹´
public class LoggerFactory {
    private String environment;
    
    public LoggerFactory(String environment) {
        this.environment = environment;
    }
    
    public Logger createLogger() {
        switch (environment) {
            case "production":
                return new CloudLogger();
            case "development":
                return new ConsoleLogger();
            case "test":
                return new FileLogger("/logs/test.log");
            default:
                return new ConsoleLogger();
        }
    }
}

// âœ… OrderProcessor: ì‚¬ìš©ë§Œ ë‹´ë‹¹
public class OrderProcessor {
    private Logger logger;
    
    public OrderProcessor(Logger logger) {
        this.logger = logger;
    }
    
    public void processOrder(Order order) {
        logger.log("Processing order: " + order.getId());
        order.process();
        logger.log("Order processed: " + order.getId());
    }
}

// âœ… ì¡°í•©
public class Application {
    public static void main(String[] args) {
        LoggerFactory factory = new LoggerFactory("production");
        Logger logger = factory.createLogger();
        
        OrderProcessor processor = new OrderProcessor(logger);
        processor.processOrder(new Order());
    }
}
```

**ì±…ì„ ë¶„ë¦¬ íš¨ê³¼:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LoggerFactory   â”‚  â† ìƒì„± ì „ë¬¸ê°€
â”‚                 â”‚
â”‚ - createLogger()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Logger ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Application     â”‚  â† ì¡°ìœ¨ì
â”‚                 â”‚
â”‚ - main()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ Logger ì£¼ì…
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OrderProcessor  â”‚  â† ì‚¬ìš© ì „ë¬¸ê°€
â”‚                 â”‚
â”‚ - processOrder()â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê° ê°ì²´ì˜ ì±…ì„ì´ ëª…í™•í•˜ê²Œ ë¶„ë¦¬ë¨!
```

---

### ì˜ˆì œ 3: ì¸ì¦ ì‹œìŠ¤í…œ - DI vs SERVICE LOCATOR

#### âŒ SERVICE LOCATOR íŒ¨í„´

```java
// âŒ SERVICE LOCATOR
public class ServiceLocator {
    private static ServiceLocator instance = new ServiceLocator();
    private AuthenticationProvider authProvider;
    
    public static AuthenticationProvider getAuthProvider() {
        return instance.authProvider;
    }
    
    public static void register(AuthenticationProvider provider) {
        instance.authProvider = provider;
    }
    
    private ServiceLocator() {}
}

// âŒ ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±
public class LoginController {
    public void login(String username, String password) {
        // âŒ ì˜ì¡´ì„±ì´ ìˆ¨ê²¨ì ¸ ìˆìŒ
        AuthenticationProvider auth = ServiceLocator.getAuthProvider();
        
        if (auth.authenticate(username, password)) {
            // ë¡œê·¸ì¸ ì„±ê³µ
        }
    }
}

// ì‚¬ìš©
public class Application {
    public static void main(String[] args) {
        // âŒ ì´ˆê¸°í™”ë¥¼ ìŠìœ¼ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬
        ServiceLocator.register(new JwtAuthProvider());
        
        LoginController controller = new LoginController();
        controller.login("user", "pass");
    }
}
```

**SERVICE LOCATORì˜ ë¬¸ì œ:**

```java
@Test
void testLogin() {
    // âŒ ë¬¸ì œ 1: í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ServiceLocator ìƒíƒœ ê³µìœ 
    ServiceLocator.register(new MockAuthProvider());
    
    LoginController controller = new LoginController();
    controller.login("test", "test");
    
    // ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŒ!
}

@Test
void testLoginFailure() {
    // âŒ ë¬¸ì œ 2: ì´ì „ í…ŒìŠ¤íŠ¸ì˜ MockAuthProviderê°€ ë‚¨ì•„ìˆì„ ìˆ˜ ìˆìŒ
    LoginController controller = new LoginController();
    // ì˜ˆìƒì¹˜ ëª»í•œ ë™ì‘ ë°œìƒ ê°€ëŠ¥
}
```

#### âœ… ì˜ì¡´ì„± ì£¼ì… (DI)

```java
// âœ… ì¶”ìƒí™”
public interface AuthenticationProvider {
    boolean authenticate(String username, String password);
}

public class JwtAuthProvider implements AuthenticationProvider {
    @Override
    public boolean authenticate(String username, String password) {
        // JWT ì¸ì¦ ë¡œì§
        return true;
    }
}

public class OAuthProvider implements AuthenticationProvider {
    @Override
    public boolean authenticate(String username, String password) {
        // OAuth ì¸ì¦ ë¡œì§
        return true;
    }
}

// âœ… ëª…ì‹œì ì¸ ì˜ì¡´ì„±
public class LoginController {
    private AuthenticationProvider authProvider;
    
    // âœ… ì˜ì¡´ì„±ì´ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ëª…ì‹œì ìœ¼ë¡œ ë“œëŸ¬ë‚¨
    public LoginController(AuthenticationProvider authProvider) {
        this.authProvider = authProvider;
    }
    
    public void login(String username, String password) {
        if (authProvider.authenticate(username, password)) {
            // ë¡œê·¸ì¸ ì„±ê³µ
        }
    }
}

// ì‚¬ìš©
public class Application {
    public static void main(String[] args) {
        // âœ… ì˜ì¡´ì„±ì´ ëª…í™•í•˜ê²Œ ì „ë‹¬ë¨
        AuthenticationProvider auth = new JwtAuthProvider();
        LoginController controller = new LoginController(auth);
        
        controller.login("user", "pass");
    }
}
```

**í…ŒìŠ¤íŠ¸ ë¹„êµ:**

```java
// âœ… DI: í…ŒìŠ¤íŠ¸ê°€ ì‰½ê³  ë…ë¦½ì 
@Test
void testLoginSuccess() {
    // Mock ê°ì²´ë¥¼ ì§ì ‘ ì£¼ì…
    AuthenticationProvider mockAuth = mock(AuthenticationProvider.class);
    when(mockAuth.authenticate("test", "test")).thenReturn(true);
    
    LoginController controller = new LoginController(mockAuth);
    controller.login("test", "test");
    
    // ê²€ì¦
    verify(mockAuth).authenticate("test", "test");
}

@Test
void testLoginFailure() {
    // ê° í…ŒìŠ¤íŠ¸ê°€ ë…ë¦½ì 
    AuthenticationProvider mockAuth = mock(AuthenticationProvider.class);
    when(mockAuth.authenticate("wrong", "wrong")).thenReturn(false);
    
    LoginController controller = new LoginController(mockAuth);
    controller.login("wrong", "wrong");
    
    // ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì— ì˜í–¥ ì—†ìŒ
}
```

**ë¹„êµí‘œ:**

| ì¸¡ë©´ | SERVICE LOCATOR | ì˜ì¡´ì„± ì£¼ì… |
|------|----------------|------------|
| **ì˜ì¡´ì„± ê°€ì‹œì„±** | ìˆ¨ê²¨ì§ | ëª…ì‹œì  |
| **ì˜¤ë¥˜ ë°œê²¬** | ëŸ°íƒ€ì„ | ì»´íŒŒì¼íƒ€ì„ |
| **í…ŒìŠ¤íŠ¸ ê²©ë¦¬** | ì–´ë ¤ì›€ (ìƒíƒœ ê³µìœ ) | ì‰¬ì›€ (ë…ë¦½ì ) |
| **ì´í•´ë„** | ì½”ë“œ ì¶”ì  í•„ìš” | ì‹œê·¸ë‹ˆì²˜ë§Œ ë´ë„ ëª…í™• |
| **ìº¡ìŠí™”** | ìœ„ë°˜ | ì¤€ìˆ˜ |

---

### ì˜ˆì œ 4: ë³´ê³ ì„œ ìƒì„± - DIP ì ìš©

#### âŒ Before: ìƒìœ„ ìˆ˜ì¤€ì´ í•˜ìœ„ ìˆ˜ì¤€ì— ì˜ì¡´

```java
// âŒ í•˜ìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤
public class ExcelReportGenerator {
    public byte[] generate(List<Data> data) {
        // Excel ìƒì„± ë¡œì§
        return excelBytes;
    }
}

// âŒ ìƒìœ„ ìˆ˜ì¤€ì´ í•˜ìœ„ ìˆ˜ì¤€ì— ì§ì ‘ ì˜ì¡´
public class ReportService {
    private ExcelReportGenerator generator;
    
    public ReportService() {
        // âŒ êµ¬ì²´ í´ë˜ìŠ¤ì— ì˜ì¡´
        this.generator = new ExcelReportGenerator();
    }
    
    public byte[] createReport(List<Data> data) {
        return generator.generate(data);
    }
}
```

**ë¬¸ì œì :**

```
íŒ¨í‚¤ì§€ êµ¬ì¡°:
report/
â”œâ”€â”€ ReportService.java (ìƒìœ„ ìˆ˜ì¤€)
â””â”€â”€ excel/
    â””â”€â”€ ExcelReportGenerator.java (í•˜ìœ„ ìˆ˜ì¤€)

ì˜ì¡´ì„± ë°©í–¥: ReportService â†’ ExcelReportGenerator

ë¬¸ì œ:
1. ReportServiceë¥¼ ì¬ì‚¬ìš©í•˜ë ¤ë©´ ExcelReportGenerator í•„ìš”
2. PDF ë¦¬í¬íŠ¸ë¡œ ë³€ê²½í•˜ë ¤ë©´ ReportService ìˆ˜ì • í•„ìš”
3. ìƒìœ„ ìˆ˜ì¤€ì´ í•˜ìœ„ ìˆ˜ì¤€ì— ì¢…ì†ë¨
```

#### âœ… After: DIP ì ìš©

```java
// âœ… ì¶”ìƒí™”ë¥¼ ìƒìœ„ ìˆ˜ì¤€ íŒ¨í‚¤ì§€ì— ë°°ì¹˜
package report;

public interface ReportGenerator {
    byte[] generate(List<Data> data);
}

// âœ… ìƒìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤
package report;

public class ReportService {
    private ReportGenerator generator;
    
    // âœ… ì¶”ìƒí™”ì— ì˜ì¡´
    public ReportService(ReportGenerator generator) {
        this.generator = generator;
    }
    
    public byte[] createReport(List<Data> data) {
        return generator.generate(data);
    }
}

// âœ… í•˜ìœ„ ìˆ˜ì¤€ í´ë˜ìŠ¤ë“¤ (ë³„ë„ íŒ¨í‚¤ì§€)
package report.excel;

public class ExcelReportGenerator implements ReportGenerator {
    @Override
    public byte[] generate(List<Data> data) {
        // Excel ìƒì„±
    }
}

package report.pdf;

public class PdfReportGenerator implements ReportGenerator {
    @Override
    public byte[] generate(List<Data> data) {
        // PDF ìƒì„±
    }
}

package report.csv;

public class CsvReportGenerator implements ReportGenerator {
    @Override
    public byte[] generate(List<Data> data) {
        // CSV ìƒì„±
    }
}
```

**íŒ¨í‚¤ì§€ êµ¬ì¡° ë¹„êµ:**

```
Before (DIP ìœ„ë°˜):
report/
â”œâ”€â”€ ReportService.java  â”€â”€â”€â”€â”€â”
â””â”€â”€ excel/                   â”‚ ì˜ì¡´
    â””â”€â”€ ExcelReportGenerator.java â†â”˜

After (DIP ì¤€ìˆ˜):
report/
â”œâ”€â”€ ReportService.java  â”€â”€â”€â”€â”€â”
â”œâ”€â”€ ReportGenerator.java â†â”€â”€â”€â”¤ ëª¨ë‘ ì¶”ìƒí™”ì— ì˜ì¡´
â”œâ”€â”€ excel/                   â”‚
â”‚   â””â”€â”€ ExcelReportGenerator.java â”€â”˜
â”œâ”€â”€ pdf/
â”‚   â””â”€â”€ PdfReportGenerator.java
â””â”€â”€ csv/
    â””â”€â”€ CsvReportGenerator.java

ì˜ì¡´ì„± ì—­ì „:
- excel íŒ¨í‚¤ì§€ê°€ report íŒ¨í‚¤ì§€ì— ì˜ì¡´
- ReportService ì¬ì‚¬ìš© ì‹œ ReportGeneratorë§Œ í•„ìš”
- êµ¬ì²´ í´ë˜ìŠ¤ë“¤ì€ ì„ íƒì ìœ¼ë¡œ í¬í•¨
```

**ì‚¬ìš© ì˜ˆì‹œ:**

```java
// Excel ë¦¬í¬íŠ¸
ReportService service1 = new ReportService(
    new ExcelReportGenerator()
);

// PDF ë¦¬í¬íŠ¸
ReportService service2 = new ReportService(
    new PdfReportGenerator()
);

// CSV ë¦¬í¬íŠ¸
ReportService service3 = new ReportService(
    new CsvReportGenerator()
);

// ReportService ì½”ë“œëŠ” ì „í˜€ ìˆ˜ì •í•˜ì§€ ì•ŠìŒ!
```

---

## 8. íŒ¨í„´ë³„ ì‹¤ì „ ê°€ì´ë“œ

### 1. OCP ì ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸

#### Step 1: OCP ìœ„ë°˜ ì§•í›„ ì°¾ê¸°

```java
// ì²´í¬ë¦¬ìŠ¤íŠ¸
â–¡ if-else ë˜ëŠ” switch ë¬¸ìœ¼ë¡œ íƒ€ì… ë¶„ê¸°í•˜ëŠ”ê°€?
â–¡ ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ì‹œ ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•˜ëŠ”ê°€?
â–¡ êµ¬ì²´ í´ë˜ìŠ¤ì— ì§ì ‘ ì˜ì¡´í•˜ëŠ”ê°€?
```

#### Step 2: ì¶”ìƒí™” ë„ì¶œ

```java
// ê³µí†µì  ì°¾ê¸°
ë³€í•˜ì§€ ì•ŠëŠ” ë¶€ë¶„: ë©”ì‹œì§€ ì „ì†¡ í–‰ìœ„
ë³€í•˜ëŠ” ë¶€ë¶„: ì „ì†¡ ë°©ë²• (Email, SMS, Push, Slack...)

// ì¶”ìƒí™” ì •ì˜
public interface MessageSender {
    void send(String message);  // ê³µí†µ ì¸í„°í˜ì´ìŠ¤
}
```

#### Step 3: êµ¬ì²´ í´ë˜ìŠ¤ ë¶„ë¦¬

```java
// ê° ë³€í˜•ì„ ë³„ë„ í´ë˜ìŠ¤ë¡œ
public class EmailSender implements MessageSender { }
public class SmsSender implements MessageSender { }
public class PushSender implements MessageSender { }
```

#### Step 4: í´ë¼ì´ì–¸íŠ¸ ìˆ˜ì •

```java
// Before
private EmailSender sender = new EmailSender();

// After
private MessageSender sender;  // ì¶”ìƒí™”ì— ì˜ì¡´

public Client(MessageSender sender) {
    this.sender = sender;
}
```

---

### 2. ìƒì„± ì‚¬ìš© ë¶„ë¦¬ ê°€ì´ë“œ

#### ê²°ì • íŠ¸ë¦¬

```
ìƒì„±ê³¼ ì‚¬ìš©ì´ ê°™ì€ í´ë˜ìŠ¤ì— ìˆëŠ”ê°€?
    â”œâ”€ YES â†’ ë¶„ë¦¬ í•„ìš”
    â”‚   â”‚
    â”‚   â”œâ”€ ìƒì„± ì§€ì‹ì„ í´ë¼ì´ì–¸íŠ¸ê°€ ì•Œì•„ë„ ë˜ëŠ”ê°€?
    â”‚   â”‚   â”œâ”€ YES â†’ í´ë¼ì´ì–¸íŠ¸ë¡œ ì´ë™
    â”‚   â”‚   â””â”€ NO â†’ FACTORY ë„ì…
    â”‚   â”‚
    â”‚   â””â”€ ë„ë©”ì¸ ê°œë…ìœ¼ë¡œ í‘œí˜„ ê°€ëŠ¥í•œê°€?
    â”‚       â”œâ”€ YES â†’ INFORMATION EXPERT íŒ¨í„´
    â”‚       â””â”€ NO â†’ PURE FABRICATION (Factory)
    â”‚
    â””â”€ NO â†’ í˜„ì¬ ì„¤ê³„ ìœ ì§€
```

#### FACTORY ë„ì… ì‹œì 

```java
// FACTORYê°€ í•„ìš”í•œ ê²½ìš°
â–¡ ìƒì„± ë¡œì§ì´ ë³µì¡í•œê°€?
â–¡ ì—¬ëŸ¬ ê°ì²´ë¥¼ ì¡°í•©í•´ì•¼ í•˜ëŠ”ê°€?
â–¡ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¸ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ”ê°€?
â–¡ ìƒì„± ì§€ì‹ì„ ìº¡ìŠí™”í•˜ê³  ì‹¶ì€ê°€?

// ì˜ˆì‹œ
public class DatabaseConnectionFactory {
    public Connection create(String environment) {
        if (environment.equals("production")) {
            return new ProductionConnection(/* ë³µì¡í•œ ì„¤ì • */);
        } else if (environment.equals("development")) {
            return new DevelopmentConnection(/* ë‹¤ë¥¸ ì„¤ì • */);
        }
        // ë³µì¡í•œ ìƒì„± ë¡œì§ì„ í•œ ê³³ì— ëª¨ìŒ
    }
}
```

---

### 3. ì˜ì¡´ì„± ì£¼ì… ë°©ë²• ì„ íƒ

#### ì˜ì‚¬ê²°ì • í”Œë¡œìš°

```
ì˜ì¡´ì„±ì´ í•„ìˆ˜ì¸ê°€?
    â”œâ”€ YES â†’ ìƒì„±ì ì£¼ì… ì‚¬ìš©
    â”‚   â”‚
    â”‚   â””â”€ ëŸ°íƒ€ì„ì— ë³€ê²½ì´ í•„ìš”í•œê°€?
    â”‚       â”œâ”€ YES â†’ ìƒì„±ì + Setter ì¡°í•©
    â”‚       â””â”€ NO â†’ ìƒì„±ìë§Œ ì‚¬ìš©
    â”‚
    â””â”€ NO â†’ ì„ íƒì  ì˜ì¡´ì„±
        â”‚
        â”œâ”€ ê°ì²´ ìƒëª…ì£¼ê¸° ë‚´ë‚´ í•„ìš”í•œê°€?
        â”‚   â”œâ”€ YES â†’ Setter ì£¼ì…
        â”‚   â””â”€ NO â†’ ë©”ì„œë“œ ì£¼ì…
        â”‚
        â””â”€ í•œë‘ ê°œ ë©”ì„œë“œì—ë§Œ í•„ìš”í•œê°€?
            â””â”€ YES â†’ ë©”ì„œë“œ ì£¼ì…
```

#### ì˜ˆì œ ì½”ë“œ

```java
public class EmailService {
    // í•„ìˆ˜ ì˜ì¡´ì„±
    private final MessageFormatter formatter;
    
    // ì„ íƒì  ì˜ì¡´ì„± (ê¸°ë³¸ê°’ ì œê³µ)
    private Logger logger = new NullLogger();
    
    // âœ… ìƒì„±ì: í•„ìˆ˜ ì˜ì¡´ì„±
    public EmailService(MessageFormatter formatter) {
        this.formatter = formatter;
    }
    
    // âœ… Setter: ì„ íƒì  ì˜ì¡´ì„±
    public void setLogger(Logger logger) {
        this.logger = logger;
    }
    
    // âœ… ë©”ì„œë“œ ì£¼ì…: ì¼ì‹œì  ì˜ì¡´ì„±
    public void send(String message, EmailValidator validator) {
        if (validator.isValid(message)) {
            String formatted = formatter.format(message);
            logger.log("Sending: " + formatted);
            // ì „ì†¡ ë¡œì§
        }
    }
}
```

---

### 4. DIP ì ìš© ê°€ì´ë“œ

#### Step 1: ìƒìœ„/í•˜ìœ„ ìˆ˜ì¤€ ì‹ë³„

```
ì§ˆë¬¸:
â–¡ ì´ í´ë˜ìŠ¤ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ì •ì±…ì„ ë‹´ë‹¹í•˜ëŠ”ê°€? â†’ ìƒìœ„ ìˆ˜ì¤€
â–¡ ì´ í´ë˜ìŠ¤ëŠ” êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì„ ë‹´ë‹¹í•˜ëŠ”ê°€? â†’ í•˜ìœ„ ìˆ˜ì¤€

ì˜ˆì‹œ:
OrderService (ìƒìœ„) - ì£¼ë¬¸ ì²˜ë¦¬ ì •ì±…
EmailSender (í•˜ìœ„) - ì´ë©”ì¼ ì „ì†¡ êµ¬í˜„
```

#### Step 2: ì˜ì¡´ì„± ë°©í–¥ í™•ì¸

```java
// âŒ ì˜ëª»ëœ ì˜ì¡´ì„± ë°©í–¥
public class OrderService {
    private EmailSender sender;  // ìƒìœ„ â†’ í•˜ìœ„
}

// âœ… ì˜¬ë°”ë¥¸ ì˜ì¡´ì„± ë°©í–¥
public class OrderService {
    private NotificationSender sender;  // ìƒìœ„ â†’ ì¶”ìƒí™”
}

public class EmailSender implements NotificationSender {
    // í•˜ìœ„ â†’ ì¶”ìƒí™”
}
```

#### Step 3: íŒ¨í‚¤ì§€ êµ¬ì¡° ì¡°ì •

```
Before:
service/
â”œâ”€â”€ OrderService.java
â””â”€â”€ notification/
    â”œâ”€â”€ NotificationSender.java
    â””â”€â”€ EmailSender.java

After (SEPARATED INTERFACE):
service/
â”œâ”€â”€ OrderService.java
â”œâ”€â”€ NotificationSender.java  â† ìƒìœ„ íŒ¨í‚¤ì§€ë¡œ ì´ë™
â””â”€â”€ notification/
    â””â”€â”€ EmailSender.java  â† í•˜ìœ„ íŒ¨í‚¤ì§€
```

---

### 5. ìœ ì—°ì„± íŒë‹¨ ê¸°ì¤€

#### ìœ ì—°í•œ ì„¤ê³„ê°€ í•„ìš”í•œ ê²½ìš°

```
âœ… ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¼ë„ í•´ë‹¹í•˜ë©´ ìœ ì—°í•œ ì„¤ê³„ ê³ ë ¤:

1. ìš”êµ¬ì‚¬í•­ ë³€ê²½ì´ ì¦ì€ê°€?
   - ì£¼ê¸°: ì›” 1íšŒ ì´ìƒ

2. ë‹¤ì–‘í•œ ì»¨í…ìŠ¤íŠ¸ì—ì„œ ì¬ì‚¬ìš©ë˜ëŠ”ê°€?
   - 3ê°œ ì´ìƒì˜ ë‹¤ë¥¸ í”„ë¡œì íŠ¸/ëª¨ë“ˆì—ì„œ ì‚¬ìš©

3. ëŸ°íƒ€ì„ì— ë™ì‘ì„ ë³€ê²½í•´ì•¼ í•˜ëŠ”ê°€?
   - ì„¤ì •ì— ë”°ë¼ ë‹¤ë¥¸ ë™ì‘

4. í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±ì´ ì¤‘ìš”í•œê°€?
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ > 80%
```

#### ë‹¨ìˆœí•œ ì„¤ê³„ë¡œ ì¶©ë¶„í•œ ê²½ìš°

```
âœ… ë‹¤ìŒì˜ ê²½ìš° ë‹¨ìˆœí•œ ì„¤ê³„ ìœ ì§€:

1. ìš”êµ¬ì‚¬í•­ì´ ì•ˆì •ì ì¸ê°€?
   - 1ë…„ ì´ìƒ ë³€ê²½ ì—†ìŒ

2. íŠ¹ì • ì»¨í…ìŠ¤íŠ¸ì—ì„œë§Œ ì‚¬ìš©ë˜ëŠ”ê°€?
   - í•œ í”„ë¡œì íŠ¸ ë‚´ì—ì„œë§Œ ì‚¬ìš©

3. íŒ€ì˜ ìˆ™ë ¨ë„ê°€ ë‚®ì€ê°€?
   - ì£¼ë‹ˆì–´ ê°œë°œì ë¹„ìœ¨ > 50%

4. ë³µì¡ì„± ë¹„ìš©ì´ ì´ìµë³´ë‹¤ í°ê°€?
   - ì½”ë“œ ì´í•´/ìœ ì§€ë³´ìˆ˜ ì–´ë ¤ì›€
```

#### íŠ¸ë ˆì´ë“œì˜¤í”„ í‰ê°€í‘œ

| ê¸°ì¤€ | ë‹¨ìˆœí•œ ì„¤ê³„ | ìœ ì—°í•œ ì„¤ê³„ |
|------|-----------|-----------|
| **ì´í•´ë„** | â­â­â­â­â­ | â­â­ |
| **ë³€ê²½ ìš©ì´ì„±** | â­â­ | â­â­â­â­â­ |
| **ì´ˆê¸° ê°œë°œ ì†ë„** | â­â­â­â­â­ | â­â­â­ |
| **ì¥ê¸° ìœ ì§€ë³´ìˆ˜** | â­â­ | â­â­â­â­ |
| **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±** | â­â­â­ | â­â­â­â­â­ |
| **ì¬ì‚¬ìš©ì„±** | â­â­ | â­â­â­â­â­ |

---

## ğŸ”— ì—°ê²°ê³ ë¦¬

### ì´ì „ ì¥ê³¼ì˜ ì—°ê²°
- **Chapter 08**: ì˜ì¡´ì„± ê´€ë¦¬ ê¸°ë²• í•™ìŠµ â†’ ì›ì¹™ìœ¼ë¡œ ìŠ¹í™”
- ì»´íŒŒì¼íƒ€ì„/ëŸ°íƒ€ì„ ì˜ì¡´ì„± â†’ OCPì˜ í•µì‹¬
- ìƒì„±ê³¼ ì‚¬ìš© ë¶„ë¦¬ â†’ FACTORY íŒ¨í„´

### ë‹¤ìŒ ì¥ ì˜ˆê³ 
- **Chapter 10**: ìƒì†ê³¼ ì½”ë“œ ì¬ì‚¬ìš©
  - ìƒì†ì˜ ë¬¸ì œì 
  - í•©ì„±ì˜ ì¥ì 
  - ë¯¹ìŠ¤ì¸

---
<div align="center">

**[â¬† ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#-ëª©ì°¨)**

</div>

<div align="center">

**[â¬…ï¸ ì´ì „: Chapter 08](../chapter08/README.md) | [ë‹¤ìŒ: Chapter 10 â¡ï¸](../chapter10/README.md)**

</div>
